# ì¼€ì–´í˜ì´ ê°€ë””ì–¸ PRD (Product Requirements Document)

**ë¬¸ì„œ ë²„ì „**: 1.0 (Twilio Voice ê¸°ë°˜ MVP)

**ìµœì¢… ìˆ˜ì •ì¼**: 2024.11.19

**ì‘ì„±ì**: ì„ì„±ë¹ˆ (PM, Team SuperBin)

**ìƒíƒœ**: Draft â†’ Review â†’ **Approved**

**ê°œë°œ ê¸°ê°„**: 7ì¼ (2024.11.25 - 2024.12.01)

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#1-%EA%B0%9C%EC%9A%94)
2. [ë¬¸ì œ ì •ì˜ ë° ê¸°íšŒ](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#2-%EB%AC%B8%EC%A0%9C-%EC%A0%95%EC%9D%98-%EB%B0%8F-%EA%B8%B0%ED%9A%8C)
3. [ì œí’ˆ ë¹„ì „ ë° ëª©í‘œ](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#3-%EC%A0%9C%ED%92%88-%EB%B9%84%EC%A0%84-%EB%B0%8F-%EB%AA%A9%ED%91%9C)
4. [ì‚¬ìš©ì ì •ì˜](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#4-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98)
5. [MVP ë²”ìœ„ ë° ìš°ì„ ìˆœìœ„](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#5-mvp-%EB%B2%94%EC%9C%84-%EB%B0%8F-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84)
6. [í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#6-%ED%95%B5%EC%8B%AC-%EA%B8%B0%EB%8A%A5-%EB%AA%85%EC%84%B8)
7. [ì‚¬ìš©ì í”Œë¡œìš°](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#7-%EC%82%AC%EC%9A%A9%EC%9E%90-%ED%94%8C%EB%A1%9C%EC%9A%B0)
8. [ê¸°ìˆ  ìš”êµ¬ì‚¬í•­](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#8-%EA%B8%B0%EC%88%A0-%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD)
9. [Twilio í†µí•© ëª…ì„¸](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#9-twilio-%ED%86%B5%ED%95%A9-%EB%AA%85%EC%84%B8)
10. [ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#10-%EB%B9%84%EA%B8%B0%EB%8A%A5-%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD)
11. [ì„±ê³µ ì§€í‘œ](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#11-%EC%84%B1%EA%B3%B5-%EC%A7%80%ED%91%9C)
12. [ë¡œë“œë§µ](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#12-%EB%A1%9C%EB%93%9C%EB%A7%B5)
13. [ë¦¬ìŠ¤í¬ ë° ì œì•½ì‚¬í•­](https://claude.ai/chat/b086c04e-650f-4bd8-820b-0efdf9429c3f#13-%EB%A6%AC%EC%8A%A4%ED%81%AC-%EB%B0%8F-%EC%A0%9C%EC%95%BD%EC%82%AC%ED%95%AD)

---

## 1. ê°œìš”

### 1.1 ì œí’ˆ ê°œìš”

**ì œí’ˆëª…**: ì¼€ì–´í˜ì´ ê°€ë””ì–¸ (CarePay Guardian)

**ì¹´í…Œê³ ë¦¬**: í•€í…Œí¬ ë³´ì•ˆ / ê¸ˆìœµ ì‚¬ê¸° ë°©ì§€

**í”Œë«í¼**: Web (Next.js) + Twilio Voice API

**í•œ ì¤„ ì„¤ëª…**

> "ê³ ë ¹ìÂ·ë””ì§€í„¸ ì·¨ì•½ì¸µì„ ìœ„í•œ ì‹¤ì‹œê°„ ìŒì„± ê²°ì œ í™•ì¸ ì„œë¹„ìŠ¤"
> 

**í•µì‹¬ ê°€ì¹˜ ì œì•ˆ**

```
ê¸°ì¡´ ë°©ì‹: ê²°ì œ í›„ 8-15ë¶„ ë’¤ SMS ì•Œë¦¼ â†’ ì´ë¯¸ í”¼í•´ ë°œìƒ
ì¼€ì–´í˜ì´: ê²°ì œ ì§ì „ ì‹¤ì‹œê°„ ì „í™” â†’ ìŒì„±ìœ¼ë¡œ ì˜ë„ í™•ì¸ â†’ í”¼í•´ ì›ì²œ ì°¨ë‹¨

```

---

### 1.2 ë°°ê²½ ë° ëª©ì 

**ì‹œì¥ ë°°ê²½**

- 2024ë…„ ìƒë°˜ê¸° ë³´ì´ìŠ¤í”¼ì‹± í”¼í•´ì•¡: **4,892ì–µì›** (ì „ë…„ ëŒ€ë¹„ +14.8%)
- 60ëŒ€ ì´ìƒ í”¼í•´ ë¹„ì¤‘: **46.7%** (ê±°ì˜ ì ˆë°˜)
- ê¸°ì¡´ ì´ìƒê±°ë˜ íƒì§€ ì‹œìŠ¤í…œ ì˜¤íƒë¥ : **25-40%**
- í‰ê·  ëŒ€ì‘ ì‹œê°„: **8-15ë¶„** (ì‚¬í›„ ì°¨ë‹¨)

**ì œí’ˆ ëª©ì **

1. ê³ ìœ„í—˜ ê²°ì œ ì‹œ **ì‹¤ì‹œê°„ ìŒì„± í†µí™”**ë¡œ ë³¸ì¸ ì˜ë„ í™•ì¸
2. ê°œì¸ íŒ¨í„´ í•™ìŠµìœ¼ë¡œ **ì˜¤íƒë¥  10% ì´í•˜** ë‹¬ì„±
3. ë³´í˜¸ìê°€ **3ì´ˆ ë‚´ ì•Œë¦¼ ìˆ˜ì‹ ** ë° ì›í´ë¦­ ì°¨ë‹¨
4. í•´ì»¤í†¤ 7ì¼ ë‚´ **ë°ëª¨ ê°€ëŠ¥í•œ MVP** ì™„ì„±

---

### 1.3 MVPì˜ í•µì‹¬ ì°¨ë³„ì 

| êµ¬ë¶„ | ê¸°ì¡´ ì†”ë£¨ì…˜ | ì¼€ì–´í˜ì´ ê°€ë””ì–¸ MVP |
| --- | --- | --- |
| **í™•ì¸ ë°©ì‹** | SMS ë¬¸ì (ì½ê¸° ì–´ë ¤ì›€) | **ì‹¤ì‹œê°„ ì „í™” í†µí™”** (ìŒì„±) |
| **íƒ€ì´ë°** | ê²°ì œ í›„ 8-15ë¶„ | **ê²°ì œ ì§ì „ 1ë¶„ ì´ë‚´** |
| **ê°œì¸í™”** | í‰ê·  íŒ¨í„´ (ì˜¤íƒ 40%) | **ê°œì¸ íŒ¨í„´ í•™ìŠµ** (ì˜¤íƒ ëª©í‘œ 10%) |
| **ë³´í˜¸ì ê¶Œí•œ** | ì‚¬í›„ ë‚´ì—­ í™•ì¸ë§Œ | **ì¦‰ì‹œ ì°¨ë‹¨ ê¶Œí•œ** (ì›í´ë¦­) |
| **ê¸°ìˆ  ìŠ¤íƒ** | ìì²´ TTS/STT | **Twilio Voice API** (ê²€ì¦ëœ ì•ˆì •ì„±) |

---

## 2. ë¬¸ì œ ì •ì˜ ë° ê¸°íšŒ

### 2.1 ë¬¸ì œ ì •ì˜

**Problem Statement**

> "ê³ ë ¹ìì™€ ë””ì§€í„¸ ì·¨ì•½ì¸µì€ ë³µì¡í•œ ê¸ˆìœµ ì•± UXë¥¼ ì´í•´í•˜ê¸° ì–´ë µê³ , ë³´ì´ìŠ¤í”¼ì‹± ìˆœê°„ì— ì¦‰ê°ì ì¸ í™•ì¸ ìˆ˜ë‹¨ì´ ì—†ì–´ í‰ê·  2,427ë§Œì›ì˜ í”¼í•´ë¥¼ ì…ëŠ”ë‹¤."
> 

**í•µì‹¬ í˜ì¸í¬ì¸íŠ¸**

1. **ì‚¬ìš©ì ê´€ì  (ê³ ë ¹ì)**
    - ì‘ì€ ê¸€ì”¨, ë³µì¡í•œ ì•± â†’ ì´ìƒ ì•Œë¦¼ì„ ë´ë„ ì´í•´ ëª»í•¨
    - ê¸´ê¸‰ ìƒí™©ì—ì„œ ëˆ„êµ¬ì—ê²Œ ë¬¼ì–´ë´ì•¼ í• ì§€ ëª¨ë¦„
    - ìƒˆë²½/ì‹¬ì•¼ ì‹œê°„ëŒ€ ë³´í˜¸ì ë°©í•´í•˜ê¸° ë¯¸ì•ˆí•¨
2. **ë³´í˜¸ì ê´€ì  (ìë…€/ê°€ì¡±)**
    - ì‚¬í›„ì— í”¼í•´ ì¸ì§€ â†’ ë¬´ë ¥ê°
    - 24ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë¶ˆê°€ëŠ¥
    - ì§„ì§œ ìœ„í—˜í•œ ìˆœê°„ë§Œ ì•Œê³  ì‹¶ìŒ (ì•Œë¦¼ í”¼ë¡œë„)
3. **ì‹œìŠ¤í…œ ê´€ì **
    - ë†’ì€ ì˜¤íƒë¥  (25-40%) â†’ ì‚¬ìš©ì ì‹ ë¢° ì €í•˜
    - ì‚¬í›„ ëŒ€ì‘ (8-15ë¶„) â†’ í”¼í•´ ì´ë¯¸ ë°œìƒ
    - ê²°ì œ ì§ì „ ê°œì… ë©”ì»¤ë‹ˆì¦˜ ë¶€ì¬

---

### 2.2 ì‹œì¥ ê¸°íšŒ

**íƒ€ê²Ÿ ì‹œì¥ ê·œëª¨**

```
1ì°¨ íƒ€ê²Ÿ (ê³ ë ¹ì)
- 60ëŒ€ ì´ìƒ ì¸êµ¬: ì•½ 1,200ë§Œëª… (2024)
- ë””ì§€í„¸ ê¸ˆìœµ ì´ìš©ì: ì•½ 415ë§Œëª… (34.6%)
- ì—°ê°„ ë³´ì´ìŠ¤í”¼ì‹± í”¼í•´ì: ì•½ 16,500ëª… (60ëŒ€ ì´ìƒ ê¸°ì¤€)

2ì°¨ íƒ€ê²Ÿ (ë³´í˜¸ì)
- 60ëŒ€ ì´ìƒ ë¶€ëª¨ë¥¼ ë‘” 30-50ëŒ€: ì•½ 2,500ë§Œëª…
- ì ì¬ ê°€ì…ì: 1ì°¨ íƒ€ê²Ÿ Ã— í‰ê·  ë³´í˜¸ì 1.5ëª… = 622ë§Œëª…

ì‹œì¥ ê·œëª¨ ì¶”ì •
- TAM: 3,000ì–µì› (ì „ì²´ ê¸ˆìœµë³´ì•ˆ ì‹œì¥)
- SAM: 500ì–µì› (ê³ ë ¹ì ê¸ˆìœµë³´ì•ˆ)
- SOM: 50ì–µì› (í–¥í›„ 3ë…„ ëª©í‘œ, ì‹œì¥ì ìœ ìœ¨ 10%)

```

**ê²½ìŸ í™˜ê²½**

| ê²½ìŸì‚¬ | ë°©ì‹ | í•œê³„ì  |
| --- | --- | --- |
| ì¹´ë“œì‚¬ ì´ìƒê±°ë˜ íƒì§€ | SMS ì•Œë¦¼ | ì‚¬í›„ ëŒ€ì‘, ë†’ì€ ì˜¤íƒ |
| í† ìŠ¤ ë“± ê°„í¸ê²°ì œ | ì•± ë‚´ ìŠ¹ì¸ | ë³µì¡í•œ UX, ê³ ë ¹ì ì ‘ê·¼ì„± ë‚®ìŒ |
| ê¸ˆìœµê°ë…ì› íŒŒì¸ | ì‚¬í›„ ì‹ ê³ /ìƒë‹´ | ì˜ˆë°© ê¸°ëŠ¥ ì—†ìŒ |
| í†µì‹ ì‚¬ ìŠ¤íŒ¸ ì°¨ë‹¨ | ì „í™” ë²ˆí˜¸ í•„í„°ë§ | ì‹ ì¢… ì‚¬ê¸° ëŒ€ì‘ í•œê³„ |

**ì°¨ë³„í™” í¬ì¸íŠ¸**

- âœ… **Twilio Voice API**: ê¸°ì—…ê¸‰ ì•ˆì •ì„±, 99.95% uptime
- âœ… **ì‹¤ì‹œê°„ ìŒì„± í†µí™”**: ê³ ë ¹ìê°€ ê°€ì¥ ìµìˆ™í•œ ì¸í„°í˜ì´ìŠ¤
- âœ… **ê²°ì œ ì§ì „ ê°œì…**: í”¼í•´ ë°œìƒ ì „ ì›ì²œ ì°¨ë‹¨
- âœ… **ë³´í˜¸ì ì¦‰ì‹œ ê¶Œí•œ**: 3ì´ˆ ë‚´ ì•Œë¦¼ + ì›í´ë¦­ ì°¨ë‹¨

---

## 3. ì œí’ˆ ë¹„ì „ ë° ëª©í‘œ

### 3.1 ì œí’ˆ ë¹„ì „

**ì¥ê¸° ë¹„ì „ (3ë…„)**

> "ëª¨ë“  ê³ ë ¹ìê°€ ë””ì§€í„¸ ê¸ˆìœµì„ ì•ˆì „í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆëŠ” ì„¸ìƒ"
> 

**ë‹¨ê³„ë³„ ë¹„ì „**

```
Phase 1 (MVP, 3ê°œì›”): í•´ì»¤í†¤ ê²€ì¦ + íŒŒì¼ëŸ¿ 100ëª…
  â””â”€ "ê²°ì œ ì§ì „ ìŒì„± í™•ì¸ì´ í”¼í•´ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤" ì¦ëª…

Phase 2 (íŒŒì¼ëŸ¿, 6ê°œì›”): ì¹´ë“œì‚¬/ì§€ìì²´ ì—°ê³„ 1,000ëª…
  â””â”€ "ì‹¤ì œ í™˜ê²½ì—ì„œ ì •íƒë¥  90%, ì˜¤íƒë¥  10% ë‹¬ì„±" ì¦ëª…

Phase 3 (í™•ì¥, 1ë…„): B2B2C ëª¨ë¸ë¡œ 10ë§Œëª…
  â””â”€ "ë³´í—˜ì‚¬, ì¹´ë“œì‚¬ì™€ ì œíœ´ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ ê²€ì¦"

Phase 4 (ìŠ¤ì¼€ì¼, 2ë…„): ì „êµ­ 100ë§Œëª…
  â””â”€ "ê³ ë ¹ì ê¸ˆìœµ ì•ˆì „ì˜ í‘œì¤€ì´ ë˜ë‹¤"

```

---

### 3.2 MVP ëª©í‘œ (7ì¼)

**ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œ**

1. í•´ì»¤í†¤ ë°ëª¨ ì™„ì„± (ì‘ë™í•˜ëŠ” í”„ë¡œí† íƒ€ì…)
2. í•µì‹¬ ê°€ì„¤ ê²€ì¦
    - ê°€ì„¤ 1: ìŒì„± í†µí™”ê°€ SMSë³´ë‹¤ íš¨ê³¼ì ì´ë‹¤
    - ê°€ì„¤ 2: ê°œì¸ íŒ¨í„´ í•™ìŠµìœ¼ë¡œ ì˜¤íƒë¥ ì„ ë‚®ì¶œ ìˆ˜ ìˆë‹¤
    - ê°€ì„¤ 3: ë³´í˜¸ì ì¦‰ì‹œ ê°œì…ì´ í”¼í•´ë¥¼ ë§‰ëŠ”ë‹¤
3. íˆ¬ì/íŒŒíŠ¸ë„ˆ í™•ë³´ë¥¼ ìœ„í•œ ì„¤ë“ë ¥ ìˆëŠ” ë°ëª¨

**ê¸°ìˆ  ëª©í‘œ**

1. Twilio Voice API í†µí•© ì™„ë£Œ
2. ê²°ì œ ì‹œë®¬ë ˆì´í„° â†’ ìŒì„± í†µí™” â†’ íŒì • ì „ì²´ í”Œë¡œìš° êµ¬í˜„
3. ë³´í˜¸ì ì‹¤ì‹œê°„ ì•Œë¦¼ (Supabase Realtime)
4. ìµœì†Œ 10ê±´ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì„±ê³µ

**ì‚¬ìš©ì ê²½í—˜ ëª©í‘œ**

1. ìŒì„± í†µí™” ì‹œì‘ë¶€í„° ì™„ë£Œê¹Œì§€ **30ì´ˆ ì´ë‚´**
2. ê³ ë ¹ìë„ ì´í•´í•  ìˆ˜ ìˆëŠ” **ëª…í™•í•œ ì§ˆë¬¸** (1ë¬¸ì¥ 1ì§ˆë¬¸)
3. ë³´í˜¸ì ì•Œë¦¼ ë„ì°© **3ì´ˆ ì´ë‚´**
4. ì „ì²´ í”Œë¡œìš° **1ë¶„ ì´ë‚´** ì™„ë£Œ

---

## 4. ì‚¬ìš©ì ì •ì˜

### 4.1 Primary Persona

**í˜ë¥´ì†Œë‚˜ 1: ê¹€ìˆœì (72ì„¸, ë…ê±° ê³ ë ¹ì)**

```
ğŸ“Š Demographics
- ë‚˜ì´: 72ì„¸
- ê±°ì£¼ì§€: ì„œìš¸ ë…¸ì›êµ¬ (ë…ê±°)
- ì§ì—…: ë¬´ì§ (ì—°ê¸ˆ ìˆ˜ê¸‰)
- í•™ë ¥: ì¤‘ì¡¸
- ìŠ¤ë§ˆíŠ¸í°: ê°¤ëŸ­ì‹œ Aì‹œë¦¬ì¦ˆ (ìë…€ê°€ ì„¤ì •)

ğŸ’­ Goals & Motivations
- ìë…€ì—ê²Œ ë¶€ë‹´ ì£¼ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ìƒí™œí•˜ê¸°
- ì‚¬ê¸° ë‹¹í•˜ì§€ ì•Šê³  ì•ˆì „í•˜ê²Œ ëˆ ê´€ë¦¬í•˜ê¸°
- ê¸‰í•  ë•Œ ì‰½ê²Œ ë„ì›€ ë°›ê¸°

ğŸ˜« Pain Points
- ìŠ¤ë§ˆíŠ¸í° ê¸€ì”¨ê°€ ì‘ì•„ì„œ ì˜ ì•ˆ ë³´ì„
- ì€í–‰ ì•±ì´ ë³µì¡í•´ì„œ ì–´ë””ë¥¼ ëˆŒëŸ¬ì•¼ í• ì§€ ëª¨ë¦„
- ì „í™”ë¡œ "ê²½ì°°ì…ë‹ˆë‹¤"ë¼ê³  í•˜ë©´ ë¬´ì„­ê³  ë‹¹í™©ìŠ¤ëŸ¬ì›€
- ìƒˆë²½ì— ìë…€ ê¹¨ìš°ê¸° ë¯¸ì•ˆí•¨

ğŸ¯ Needs
- "ì´ê±° ê´œì°®ì€ ê±´ê°€ìš”?" ëˆ„ê°€ ë°”ë¡œ ì•Œë ¤ì¤¬ìœ¼ë©´
- ë³µì¡í•œ ì•± ë§ê³  ì „í™”ë¡œ ë¬¼ì–´ë´ ì¤¬ìœ¼ë©´
- ìë…€ê°€ ìœ„í—˜í•  ë•Œë§Œ ì•Œê³  ë„ì™€ì¤¬ìœ¼ë©´

ğŸ“± Tech Savviness: â­â˜†â˜†â˜†â˜†
- ì „í™” ë°›ê¸°/ê±¸ê¸°ëŠ” ê°€ëŠ¥
- ì¹´í†¡ ë©”ì‹œì§€ í™•ì¸ ê°€ëŠ¥ (ë‹µì¥ì€ ì–´ë ¤ì›€)
- ì€í–‰ ì•±ì€ ìë…€ ë„ì›€ í•„ìš”

```

**í–‰ë™ íŒ¨í„´**

```
í•˜ë£¨ ì¼ê³¼:
06:00 - ê¸°ìƒ, TV ë‰´ìŠ¤
09:00 - ê²½ë¡œë‹¹ ë˜ëŠ” ë§ˆíŠ¸
12:00 - ì ì‹¬ ì‹ì‚¬
14:00 - TV ë“œë¼ë§ˆ ì‹œì²­
18:00 - ì €ë… ì‹ì‚¬
21:00 - ì·¨ì¹¨ ì¤€ë¹„
22:00 - ìˆ˜ë©´

ê²°ì œ íŒ¨í„´:
- ì£¼ë¡œ ì˜¤ì „(ë§ˆíŠ¸), ì ì‹¬(ì‹ë‹¹), ì €ë…(í¸ì˜ì )
- í‰ê·  ê²°ì œ: 1-5ë§Œì›
- ìµœëŒ€ ê²°ì œ: 10ë§Œì› (ë§ˆíŠ¸ ì¥ë³´ê¸°)
- ì˜¨ë¼ì¸ ì‡¼í•‘: ê±°ì˜ ì•ˆ í•¨ (ìë…€ê°€ ëŒ€ì‹ )

```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**

```
[ë³´ì´ìŠ¤í”¼ì‹± ìƒí™©]
1. ì˜¤í›„ 2ì‹œ, ì „í™” ì˜´
   "ì–´ë¨¸ë‹ˆ, ê²½ì°°ì²­ì…ë‹ˆë‹¤. ì–´ë¨¸ë‹ˆ ê³„ì¢Œê°€ í•´í‚¹ë‹¹í–ˆì–´ìš”"

2. ë‹¹í™©í•´ì„œ ì§€ì‹œëŒ€ë¡œ ì€í–‰ ì•± ì‹¤í–‰

3. 300ë§Œì› ì´ì²´ ì‹œë„
   â†’ ì¼€ì–´í˜ì´ ìë™ ê°ì§€

4. 30ì´ˆ í›„ ì „í™” ì˜´ (Twilio)
   "ì–´ë¨¸ë‹ˆ, ì¼€ì–´í˜ì´ì…ë‹ˆë‹¤.
    ì§€ê¸ˆ 300ë§Œì› ë³´ë‚´ì‹œë ¤ê³  í•˜ì‹œëŠ”ë°
    ê²½ì°°ì´ë‚˜ ì€í–‰ì—ì„œ ì „í™” ë°›ìœ¼ì…¨ë‚˜ìš”?"

5. "ë„¤... ê²½ì°°ì´ë¼ê³ ..."

6. "ê²½ì°°ì€ ì ˆëŒ€ ì „í™”ë¡œ ëˆì„ ë³´ë‚´ë¼ê³  í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    ì´ ê²°ì œë¥¼ ë§‰ì•„ë“œë¦´ê²Œìš”.
    ë”°ë‹˜ê»˜ë„ ë°”ë¡œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤."

7. ê²°ì œ ì°¨ë‹¨ + ë”¸ì—ê²Œ ì¦‰ì‹œ ì•Œë¦¼

```

---

**í˜ë¥´ì†Œë‚˜ 2: ì´ë¯¸ì˜ (45ì„¸, ë³´í˜¸ì/ì§ì¥ì¸)**

```
ğŸ“Š Demographics
- ë‚˜ì´: 45ì„¸
- ê±°ì£¼ì§€: ì„œìš¸ ê°•ë‚¨êµ¬
- ì§ì—…: IT ê¸°ì—… ê³¼ì¥ (ì¬íƒ ì£¼ 2íšŒ)
- ê°€ì¡±: ë‚¨í¸, ìë…€ 2ëª…, ì–´ë¨¸ë‹ˆ(72ì„¸, ë…¸ì›êµ¬ ê±°ì£¼)

ğŸ’­ Goals & Motivations
- ì–´ë¨¸ë‹ˆ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê¸°
- ì¼ê³¼ ê°€ì • ê· í˜• ìœ ì§€
- íš¨ìœ¨ì ìœ¼ë¡œ ë¶€ëª¨ë‹˜ ì¼€ì–´í•˜ê¸°

ğŸ˜« Pain Points
- íšŒì˜ ì¤‘ì— ì–´ë¨¸ë‹ˆ ì „í™” ëª» ë°›ìŒ
- ì–´ë¨¸ë‹ˆ í†µì¥ì—ì„œ í°ëˆ ë‚˜ê°„ ê±¸ ë‚˜ì¤‘ì— ì•Œê²Œ ë¨
- ë§¤ì¼ ì–´ë¨¸ë‹ˆ ì•± í™•ì¸í•  ì‹œê°„ ì—†ìŒ
- ê³¼ë„í•œ ëª¨ë‹ˆí„°ë§ì€ ì–´ë¨¸ë‹ˆê°€ ì‹«ì–´í•˜ì‹¬

ğŸ¯ Needs
- ì§„ì§œ ìœ„í—˜í•œ ìˆœê°„ë§Œ ì•Œë¦¼ ë°›ê¸°
- íšŒì˜ ì¤‘ì´ì–´ë„ ê¸´ê¸‰ ìƒí™©ì€ ì¦‰ì‹œ ì•Œê¸°
- ì›ê²©ìœ¼ë¡œ ì¦‰ì‹œ ì°¨ë‹¨í•  ìˆ˜ ìˆëŠ” ê¶Œí•œ
- ì–´ë¨¸ë‹ˆ í”„ë¼ì´ë²„ì‹œ ì¡´ì¤‘í•˜ë©´ì„œ ë³´í˜¸í•˜ê¸°

ğŸ“± Tech Savviness: â­â­â­â­â­
- ìŠ¤ë§ˆíŠ¸í°, ì•± ì‚¬ìš© ëŠ¥ìˆ™
- ì—…ë¬´ìš© SaaS íˆ´ ë‹¤ìˆ˜ ì‚¬ìš©
- ì•Œë¦¼ ê´€ë¦¬ ì²´ê³„ì 

```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**

```
[ë³´í˜¸ì ì•Œë¦¼ ìˆ˜ì‹ ]
1. íšŒì˜ ì¤‘ (ì˜¤í›„ 2ì‹œ)

2. ìŠ¤ë§ˆíŠ¸í° ê¸´ê¸‰ ì•Œë¦¼ (ì§„ë™)
   "âš ï¸ ì–´ë¨¸ë‹ˆ ê³ ìœ„í—˜ ê²°ì œ ê°ì§€
    300ë§Œì› | ë³´ì´ìŠ¤í”¼ì‹± ì˜ì‹¬"

3. í™”ì¥ì‹¤ ê°€ëŠ” ì²™í•˜ê³  í™•ì¸

4. ì•±ì—ì„œ ìƒì„¸ ì •ë³´ í™•ì¸
   - ê¸ˆì•¡: 300ë§Œì›
   - ê°€ë§¹ì : â—‹â—‹ì‡¼í•‘ëª°
   - ì‹œê°„: ë°©ê¸ˆ ì „
   - ìœ„í—˜ ì‹ í˜¸: êµ­ì œì „í™” í›„ ê²°ì œ, ìƒˆë²½ ì‹œê°„

5. [ì¦‰ì‹œ ì°¨ë‹¨] ë²„íŠ¼ í´ë¦­ (1ì´ˆ)

6. "ê²°ì œê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.
    ì–´ë¨¸ë‹ˆê»˜ ì•ˆë‚´ ì „í™”ê°€ ê°‘ë‹ˆë‹¤."

7. 10ë¶„ í›„ ì–´ë¨¸ë‹ˆê»˜ ì§ì ‘ ì „í™”
   ìƒí™© ì„¤ëª… ë° ì•ˆì‹¬ì‹œí‚¤ê¸°

```

---

### 4.2 Secondary Persona

**í˜ë¥´ì†Œë‚˜ 3: ë°•ì˜ìˆ˜ (68ì„¸, ìì˜ì—…ì)**

```
ğŸ“Š Demographics
- ë‚˜ì´: 68ì„¸
- ì§ì—…: ì†Œí˜• ìŒì‹ì  ìš´ì˜
- ë””ì§€í„¸ ê¸ˆìœµ ì‚¬ìš©: ì¤‘ê¸‰

ğŸ’­ íŠ¹ì§•
- ìƒˆë²½/ì•¼ê°„ ì‹ìì¬ ì£¼ë¬¸ å¤š
- ê¸´ê¸‰ ê²°ì œ å¤š (ì¬ë£Œ ë–¨ì–´ì§€ë©´ ì¦‰ì‹œ ì£¼ë¬¸)
- ë†’ì€ ì˜¤íƒì— ì§€ì³ìˆìŒ

ğŸ˜« Pain Points
- ì •ìƒ ê²°ì œë„ ìê¾¸ ë§‰í˜€ì„œ ì§œì¦
- ì§„ì§œ ì´ìƒí•œ ê±´ ê·¸ëƒ¥ ì§€ë‚˜ê°
- ë©°ëŠë¦¬í•œí…Œ ë§¤ë²ˆ ë¬¼ì–´ë³´ê¸° ë¯¸ì•ˆí•¨

ğŸ¯ Needs
- ì§„ì§œ ìœ„í—˜í•œ ê²ƒë§Œ ì•Œë ¤ì£¼ê¸°
- ê¸´ê¸‰ ìƒí™©ì—” ë¹ ë¥´ê²Œ ìŠ¹ì¸
- ê°€ì¡±ì—ê²Œ ë¶€ë‹´ ì•ˆ ì£¼ê¸°

```

ì´ í˜ë¥´ì†Œë‚˜ëŠ” **ì˜¤íƒë¥  10% ëª©í‘œ**ì˜ ì¤‘ìš”ì„±ì„ ê°•ì¡°

---

## 5. MVP ë²”ìœ„ ë° ìš°ì„ ìˆœìœ„

### 5.1 MoSCoW ìš°ì„ ìˆœìœ„

**MUST HAVE (7ì¼ ë‚´ í•„ìˆ˜ êµ¬í˜„)**

```
âœ… P0 (Critical - ì—†ìœ¼ë©´ ë°ëª¨ ë¶ˆê°€)
â”œâ”€ íšŒì›ê°€ì…/ë¡œê·¸ì¸ (Supabase Auth)
â”œâ”€ ê²°ì œ ì‹œë®¬ë ˆì´í„°
â”‚   â”œâ”€ ìˆ˜ë™ ì…ë ¥ í¼
â”‚   â”œâ”€ ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ë§ (ê·œì¹™ ê¸°ë°˜)
â”‚   â””â”€ ê³ ìœ„í—˜ íŒì • ì‹œ ìŒì„± í†µí™” íŠ¸ë¦¬ê±°
â”œâ”€ Twilio Voice í†µí•©
â”‚   â”œâ”€ ì•„ì›ƒë°”ìš´ë“œ í†µí™” ë°œì‹ 
â”‚   â”œâ”€ TTSë¡œ ì§ˆë¬¸ ì½ê¸° (í•œêµ­ì–´)
â”‚   â”œâ”€ ì‚¬ìš©ì ìŒì„± ë‹µë³€ ìˆ˜ì§‘ (í‚¤íŒ¨ë“œ or ìŒì„±)
â”‚   â””â”€ ë‹µë³€ ê¸°ë°˜ ìµœì¢… íŒì •
â”œâ”€ ë³´í˜¸ì ì—°ë™
â”‚   â”œâ”€ ì´ˆëŒ€/ìˆ˜ë½
â”‚   â”œâ”€ ì‹¤ì‹œê°„ ì•Œë¦¼ (Supabase Realtime)
â”‚   â””â”€ ì°¨ë‹¨/ìŠ¹ì¸ ì•¡ì…˜
â””â”€ ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ
    â”œâ”€ ì‹¤ì‹œê°„ ì•Œë¦¼ ì„¹ì…˜
    â””â”€ ìµœê·¼ ê±°ë˜ ë‚´ì—­

```

**SHOULD HAVE (ì‹œê°„ ìˆìœ¼ë©´ ì¶”ê°€)**

```
ğŸ”¶ P1 (Important - ìˆìœ¼ë©´ ì¢‹ìŒ)
â”œâ”€ ê°œì¸ íŒ¨í„´ í•™ìŠµ (ê°„ë‹¨í•œ í†µê³„)
â”œâ”€ ê²°ì œ ë‚´ì—­ í•„í„°ë§/ê²€ìƒ‰
â”œâ”€ ì£¼ê°„ ë¦¬í¬íŠ¸
â”œâ”€ ë³´í˜¸ì ê¶Œí•œ ë ˆë²¨ ì„¤ì •
â””â”€ ìŒì„± í†µí™” ë…¹ìŒ ì €ì¥

```

**COULD HAVE (ì°¨í›„ ê³ ë ¤)**

```
ğŸ”· P2 (Nice to have)
â”œâ”€ SMS ë°±ì—… ì•Œë¦¼
â”œâ”€ ì´ë©”ì¼ ë¦¬í¬íŠ¸
â”œâ”€ ë‹¤êµ­ì–´ ì§€ì›
â””â”€ ëª¨ë°”ì¼ ì•± (ì›¹ë·°)

```

**WON'T HAVE (MVP ì œì™¸)**

```
â¸ï¸ P3 (Future)
â”œâ”€ ì‹¤ì œ ì˜¤í”ˆë±…í‚¹ ì—°ë™ (ìƒŒë“œë°•ìŠ¤ë§Œ)
â”œâ”€ AI ê¸°ë°˜ ì´ìƒ íƒì§€ (ê·œì¹™ ê¸°ë°˜ìœ¼ë¡œ ì¶©ë¶„)
â”œâ”€ ì•ˆë“œë¡œì´ë“œ ë„¤ì´í‹°ë¸Œ ì•±
â”œâ”€ ì‚¬ê¸° ì „í™”/ë©”ì‹ ì € ë¶„ì„
â””â”€ ë‹¤ìˆ˜ ë³´í˜¸ì ë™ì‹œ ê´€ë¦¬

```

---

### 5.2 Feature Prioritization Matrix

```
             ì¤‘ìš”ë„ â†’
ì˜í–¥ë„  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â†“    â”‚                          â”‚
       â”‚  P0              P1      â”‚
High   â”‚  â€¢ Twilio í†µí™”   â€¢ íŒ¨í„´í•™ìŠµâ”‚
       â”‚  â€¢ ë¦¬ìŠ¤í¬ íŒì •   â€¢ í•„í„°ë§ â”‚
       â”‚  â€¢ ë³´í˜¸ì ì•Œë¦¼            â”‚
       â”‚                          â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  P1              P2      â”‚
Low    â”‚  â€¢ ì£¼ê°„ë¦¬í¬íŠ¸     â€¢ SMS   â”‚
       â”‚  â€¢ ê¶Œí•œì„¤ì •      â€¢ ì´ë©”ì¼ â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         Low              High
              êµ¬í˜„ ë‚œì´ë„ â†’

```

---

## 6. í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸

### 6.1 ê¸°ëŠ¥ 1: ê²°ì œ ì‹œë®¬ë ˆì´í„°

**ëª©ì **: ê³ ìœ„í—˜ ê²°ì œ ìƒí™©ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê³  ë¦¬ìŠ¤í¬ ì ìˆ˜ ê³„ì‚°

**User Story**

```
As a ì‚¬ìš©ì
I want to ê°€ìƒ ê²°ì œ ì •ë³´ë¥¼ ì…ë ¥í•˜ì—¬
So that ì¼€ì–´í˜ì´ ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤

```

**Acceptance Criteria**

```gherkin
Scenario: ì •ìƒ ê²°ì œ ì‹œë®¬ë ˆì´ì…˜
  Given ì‚¬ìš©ìê°€ ê²°ì œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì— ì ‘ì†
  When ê¸ˆì•¡ 5,000ì›, ê°€ë§¹ì  "GS25", ì‹œê°„ 13ì‹œ ì…ë ¥
  And [ê²°ì œ ì‹œì‘] ë²„íŠ¼ í´ë¦­
  Then ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ 15ì  (ë‚®ìŒ) í‘œì‹œ
  And "ì•ˆì „í•˜ê²Œ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ
  And Twilio í†µí™” ë°œì‹  ì—†ìŒ

Scenario: ê³ ìœ„í—˜ ê²°ì œ ì‹œë®¬ë ˆì´ì…˜
  Given ì‚¬ìš©ìê°€ ê²°ì œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì— ì ‘ì†
  When ê¸ˆì•¡ 3,000,000ì›, ê°€ë§¹ì  "ì˜¨ë¼ì¸ì‡¼í•‘", ì‹œê°„ 2ì‹œ ì…ë ¥
  And [ê²°ì œ ì‹œì‘] ë²„íŠ¼ í´ë¦­
  Then ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ 85ì  (ë§¤ìš° ë†’ìŒ) í‘œì‹œ
  And "ìŒì„± í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ
  And 10ì´ˆ ì´ë‚´ Twilio ìŒì„± í†µí™” ë°œì‹ 

```

**ì…ë ¥ í•„ë“œ**

| í•„ë“œëª… | íƒ€ì… | í•„ìˆ˜ | ì œì•½ì¡°ê±´ | ê¸°ë³¸ê°’ |
| --- | --- | --- | --- | --- |
| amount | number | Y | 1,000 ~ 10,000,000 | - |
| merchant_name | string | Y | 1-50ì | - |
| merchant_category | select | Y | 12ê°œ ì—…ì¢… ì¤‘ ì„ íƒ | - |
| hour | number | Y | 0-23 | í˜„ì¬ ì‹œê°„ |
| location | optional | N | ìœ„ë„/ê²½ë„ | null |

**ì—…ì¢… ì˜µì…˜**

```tsx
const categories = [
  'í¸ì˜ì ',
  'ë§ˆíŠ¸/ëŒ€í˜•ë§ˆíŠ¸',
  'ìŒì‹ì /ì¹´í˜',
  'ì‡¼í•‘ëª°/ì˜ë¥˜',
  'ë³‘ì›/ì•½êµ­',
  'êµí†µ/ì£¼ìœ ',
  'ë¬¸í™”/ì—¬ê°€',
  'êµìœ¡',
  'í†µì‹ ',
  'ë³´í—˜/ê¸ˆìœµ',
  'ì˜¨ë¼ì¸ì‡¼í•‘',
  'ê¸°íƒ€'
];

```

**ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ë§ ë¡œì§**

```tsx
interface RiskFactors {
  amount_risk: number;      // 0-40ì 
  time_risk: number;        // 0-30ì 
  merchant_risk: number;    // 0-15ì 
  location_risk: number;    // 0-15ì 
}

function calculateRiskScore(
  transaction: Transaction,
  userPattern: UserPattern
): number {
  let score = 0;

  // 1. ê¸ˆì•¡ ë¦¬ìŠ¤í¬ (ìµœëŒ€ 40ì )
  const amountRatio = transaction.amount / userPattern.avg_amount;
  if (amountRatio > 20) score += 40;
  else if (amountRatio > 10) score += 30;
  else if (amountRatio > 5) score += 20;
  else if (amountRatio > 3) score += 10;

  // 2. ì‹œê°„ ë¦¬ìŠ¤í¬ (ìµœëŒ€ 30ì )
  if (!userPattern.common_hours.includes(transaction.hour)) {
    score += 15;
  }
  if (transaction.hour >= 0 && transaction.hour < 6) {
    score += 20; // ìƒˆë²½ ê°€ì¤‘ì¹˜
  }

  // 3. ê°€ë§¹ì  ë¦¬ìŠ¤í¬ (ìµœëŒ€ 15ì )
  if (!userPattern.common_categories.includes(transaction.merchant_category)) {
    score += 8;
  }
  if (!userPattern.trusted_merchants.includes(transaction.merchant_name)) {
    score += 7;
  }

  return Math.min(score, 100);
}

// ìœ„í—˜ë„ ë¶„ë¥˜
function getRiskLevel(score: number): RiskLevel {
  if (score >= 81) return 'critical';  // ì¦‰ì‹œ ì°¨ë‹¨ + ë³´í˜¸ì ê¸´ê¸‰
  if (score >= 61) return 'high';      // ìŒì„± í™•ì¸ + ë³´í˜¸ì ì•Œë¦¼
  if (score >= 31) return 'medium';    // ìŒì„± í™•ì¸ë§Œ
  return 'low';                        // ìë™ ìŠ¹ì¸
}

```

**UI/UX ìš”êµ¬ì‚¬í•­**

```
ì…ë ¥ í¼:
- í° ì…ë ¥ í•„ë“œ (ìµœì†Œ 48px ë†’ì´)
- ëª…í™•í•œ ë ˆì´ë¸” (16px, ë³¼ë“œ)
- ì‹¤ì‹œê°„ ì…ë ¥ ê²€ì¦ (ë¹¨ê°„ í…Œë‘ë¦¬ + ì—ëŸ¬ ë©”ì‹œì§€)
- ëª¨ë°”ì¼ ìµœì í™” (í„°ì¹˜ íƒ€ê²Ÿ ìµœì†Œ 44px)

ë¹ ë¥¸ ì‹œë‚˜ë¦¬ì˜¤ ë²„íŠ¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì •ìƒ ê²°ì œ  â”‚  ê³ ì•¡ ê²°ì œ  â”‚  ìƒˆë²½ ê²°ì œ  â”‚
â”‚   (5ì²œì›)   â”‚  (300ë§Œì›)  â”‚  (50ë§Œì›)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²°ê³¼ í™”ë©´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ ìœ„í—˜ë„: 85ì  (ë§¤ìš° ë†’ìŒ)        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                     â”‚
â”‚  ìœ„í—˜ ìš”ì¸:                         â”‚
â”‚  â€¢ í‰ì†Œë³´ë‹¤ ê¸ˆì•¡ì´ 20ë°° í½ë‹ˆë‹¤      â”‚
â”‚  â€¢ ìƒˆë²½ ì‹œê°„ëŒ€ ê²°ì œì…ë‹ˆë‹¤           â”‚
â”‚  â€¢ ì²˜ìŒ ì´ìš©í•˜ëŠ” ê°€ë§¹ì ì…ë‹ˆë‹¤       â”‚
â”‚                                     â”‚
â”‚  ğŸ¤ ìŒì„± í™•ì¸ ì „í™”ê°€ ë°œì‹ ë©ë‹ˆë‹¤    â”‚
â”‚                                     â”‚
â”‚  [ì „í™” ë°›ê¸° ì¤€ë¹„] (10ì´ˆ í›„ ìë™)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

**API ëª…ì„¸**

```tsx
// POST /api/transactions/simulate
interface SimulateTransactionRequest {
  user_id: string;
  amount: number;
  merchant_name: string;
  merchant_category: string;
  hour: number;
  location?: { lat: number; lng: number };
}

interface SimulateTransactionResponse {
  transaction_id: string;
  risk_score: number;
  risk_level: 'low' | 'medium' | 'high' | 'critical';
  risk_reasons: string[];
  action: 'approved' | 'voice_verification' | 'blocked';
  twilio_call_sid?: string; // ìŒì„± í†µí™” ë°œì‹  ì‹œ
}

// Example Response
{
  "transaction_id": "txn_abc123",
  "risk_score": 85,
  "risk_level": "high",
  "risk_reasons": [
    "í‰ì†Œë³´ë‹¤ ê¸ˆì•¡ì´ 20ë°° í½ë‹ˆë‹¤",
    "ìƒˆë²½ ì‹œê°„ëŒ€ ê²°ì œì…ë‹ˆë‹¤",
    "ì²˜ìŒ ì´ìš©í•˜ëŠ” ê°€ë§¹ì ì…ë‹ˆë‹¤"
  ],
  "action": "voice_verification",
  "twilio_call_sid": "CA1234567890abcdef"
}

```

---

### 6.2 ê¸°ëŠ¥ 2: Twilio ìŒì„± í™•ì¸ (í•µì‹¬!)

**ëª©ì **: ê³ ìœ„í—˜ ê²°ì œ ì‹œ ì‹¤ì‹œê°„ ìŒì„± í†µí™”ë¡œ ì‚¬ìš©ì ì˜ë„ í™•ì¸

**User Story**

```
As a ê³ ë ¹ ì‚¬ìš©ì
I want to ê³ ìœ„í—˜ ê²°ì œ ì‹œ ì¼€ì–´í˜ì´ë¡œë¶€í„° ì „í™”ë¥¼ ë°›ì•„
So that ìŒì„±ìœ¼ë¡œ ê°„ë‹¨í•œ ì§ˆë¬¸ì— ë‹µí•˜ì—¬ ë‚´ ì˜ë„ë¥¼ í™•ì¸ë°›ì„ ìˆ˜ ìˆë‹¤

```

**Acceptance Criteria**

```gherkin
Scenario: ìŒì„± í™•ì¸ í†µí™” ì„±ê³µ
  Given ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ 85ì ì¸ ê²°ì œ ì‹œë®¬ë ˆì´ì…˜
  When ì‹œìŠ¤í…œì´ Twilio í†µí™” ë°œì‹ 
  And ì‚¬ìš©ìê°€ ì „í™”ë¥¼ ë°›ìŒ
  Then TTSë¡œ "ì•ˆë…•í•˜ì„¸ìš”, ì¼€ì–´í˜ì´ì…ë‹ˆë‹¤" ì¸ì‚¬
  And ì²« ë²ˆì§¸ ì§ˆë¬¸ "ì§€ê¸ˆ â—‹â—‹ì‡¼í•‘ëª°ì—ì„œ ê²°ì œí•˜ì‹œë ¤ëŠ” ê²Œ ë§ë‚˜ìš”?"
  And ì‚¬ìš©ìê°€ í‚¤íŒ¨ë“œ 1ë²ˆ(ë„¤) ë˜ëŠ” 2ë²ˆ(ì•„ë‹ˆìš”) ì…ë ¥
  And ë‹µë³€ì— ë”°ë¼ ë‹¤ìŒ ì§ˆë¬¸ ë˜ëŠ” ìµœì¢… íŒì •
  And í†µí™” ì¢…ë£Œ í›„ ê²°ê³¼ë¥¼ DBì— ì €ì¥

Scenario: ë³´ì´ìŠ¤í”¼ì‹± íŒ¨í„´ ê°ì§€
  Given ìŒì„± í™•ì¸ í†µí™” ì§„í–‰ ì¤‘
  When "ëˆ„êµ°ê°€ì—ê²Œ ì „í™”ë¡œ ì•ˆë‚´ë°›ìœ¼ì…¨ë‚˜ìš”?" ì§ˆë¬¸
  And ì‚¬ìš©ìê°€ 1ë²ˆ(ë„¤) ì…ë ¥
  And "ì€í–‰ì´ë‚˜ ê²½ì°°ì´ë¼ê³  í–ˆë‚˜ìš”?" ì§ˆë¬¸
  And ì‚¬ìš©ìê°€ 1ë²ˆ(ë„¤) ì…ë ¥
  Then ì¦‰ì‹œ "ë³´ì´ìŠ¤í”¼ì‹±ì´ ì˜ì‹¬ë©ë‹ˆë‹¤. ê²°ì œë¥¼ ì°¨ë‹¨í•©ë‹ˆë‹¤" ì•ˆë‚´
  And í†µí™” ì¢…ë£Œ
  And transaction.status = 'blocked'
  And ë³´í˜¸ìì—ê²Œ ê¸´ê¸‰ ì•Œë¦¼ ë°œì†¡

```

---

**Twilio í†µí™” í”Œë¡œìš° (TwiML)**

```xml
<!-- 1. ì¸ì‚¬ ë° ì²« ì§ˆë¬¸ -->
<?xml version="1.0" encoding="UTF-8"?>
<Response>
  <Say voice="Polly.Seoyeon" language="ko-KR">
    ì•ˆë…•í•˜ì„¸ìš”, ì¼€ì–´í˜ì´ ê°€ë””ì–¸ì…ë‹ˆë‹¤.
    ê³ ì•¡ ê²°ì œê°€ ê°ì§€ë˜ì–´ í™•ì¸ ì „í™”ë¥¼ ë“œë¦½ë‹ˆë‹¤.
  </Say>

  <Pause length="1"/>

  <Gather
    input="dtmf"
    numDigits="1"
    timeout="10"
    action="/api/twilio/voice/question1">
    <Say voice="Polly.Seoyeon" language="ko-KR">
      ì§€ê¸ˆ {{merchant_name}}ì—ì„œ {{amount}}ì›ì„ ê²°ì œí•˜ì‹œë ¤ëŠ” ê²Œ ë§ë‚˜ìš”?
      ë§ìœ¼ì‹œë©´ 1ë²ˆ, ì•„ë‹ˆì‹œë©´ 2ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
    </Say>
  </Gather>

  <!-- 10ì´ˆ ë‚´ ì…ë ¥ ì—†ìœ¼ë©´ -->
  <Say voice="Polly.Seoyeon" language="ko-KR">
    ì‘ë‹µì´ ì—†ì–´ ë³´í˜¸ìì—ê²Œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
  </Say>
  <Hangup/>
</Response>

```

```xml
<!-- 2. ì§ˆë¬¸ 1 ë‹µë³€ ì²˜ë¦¬ -->
<?xml version="1.0" encoding="UTF-8"?>
<Response>
  <!-- Digits=1 (ë„¤, ë§ì•„ìš”) -->
  <Gather
    input="dtmf"
    numDigits="1"
    timeout="10"
    action="/api/twilio/voice/question2">
    <Say voice="Polly.Seoyeon" language="ko-KR">
      ëˆ„êµ°ê°€ì—ê²Œ ì „í™”ë‚˜ ë¬¸ìë¡œ ì•ˆë‚´ë¥¼ ë°›ìœ¼ì…¨ë‚˜ìš”?
      ë°›ìœ¼ì…¨ìœ¼ë©´ 1ë²ˆ, ì•ˆ ë°›ìœ¼ì…¨ìœ¼ë©´ 2ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
    </Say>
  </Gather>

  <!-- Digits=2 (ì•„ë‹ˆìš”) -->
  <Say voice="Polly.Seoyeon" language="ko-KR">
    í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì•ˆì „ì„ ìœ„í•´ ê²°ì œë¥¼ ì ì‹œ ë³´ë¥˜í•˜ê³ 
    ë³´í˜¸ìì—ê²Œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
  </Say>
  <Hangup/>
</Response>

```

```xml
<!-- 3. ì§ˆë¬¸ 2 ë‹µë³€ ì²˜ë¦¬ -->
<?xml version="1.0" encoding="UTF-8"?>
<Response>
  <!-- Digits=1 (ë„¤, ë°›ì•˜ì–´ìš”) -->
  <Gather
    input="dtmf"
    numDigits="1"
    timeout="10"
    action="/api/twilio/voice/question3">
    <Say voice="Polly.Seoyeon" language="ko-KR">
      ì€í–‰, ê²½ì°°, ê²€ì°°, ê¸ˆìœµê°ë…ì›ì´ë¼ê³  í–ˆë‚˜ìš”?
      ê·¸ë ‡ë‹¤ë©´ 1ë²ˆ, ì•„ë‹ˆë©´ 2ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
    </Say>
  </Gather>

  <!-- Digits=2 (ì•„ë‹ˆìš”, ì•ˆ ë°›ì•˜ì–´ìš”) -->
  <Say voice="Polly.Seoyeon" language="ko-KR">
    í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì•ˆì „í•˜ê²Œ ê²°ì œë¥¼ ì§„í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
    ê°ì‚¬í•©ë‹ˆë‹¤.
  </Say>
  <Hangup/>
</Response>

```

```xml
<!-- 4. ìµœì¢… íŒì • -->
<?xml version="1.0" encoding="UTF-8"?>
<Response>
  <!-- Digits=1 (ë„¤, ì€í–‰/ê²½ì°°ì´ë¼ê³  í–ˆì–´ìš”) -->
  <Say voice="Polly.Seoyeon" language="ko-KR">
    ì£¼ì˜í•˜ì‹­ì‹œì˜¤!
    ì€í–‰ì´ë‚˜ ê²½ì°°ì€ ì ˆëŒ€ ì „í™”ë¡œ ê³„ì¢Œì´ì²´ë¥¼ ìš”êµ¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    ë³´ì´ìŠ¤í”¼ì‹±ì´ ê°•ë ¥íˆ ì˜ì‹¬ë˜ì–´ ê²°ì œë¥¼ ì¦‰ì‹œ ì°¨ë‹¨í•©ë‹ˆë‹¤.
    ë³´í˜¸ìë¶„ê»˜ ê¸´ê¸‰ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
    112 ê²½ì°°ì²­ì´ë‚˜ 1332 ê¸ˆìœµê°ë…ì›ìœ¼ë¡œ ì‹ ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
  </Say>
  <Hangup/>

  <!-- Digits=2 (ì•„ë‹ˆìš”) -->
  <Say voice="Polly.Seoyeon" language="ko-KR">
    í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.
    ê·¸ë˜ë„ í‰ì†Œì™€ ë‹¤ë¥¸ íŒ¨í„´ì´ë¼ ë³´í˜¸ìì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚´ê² ìŠµë‹ˆë‹¤.
    ê°ì‚¬í•©ë‹ˆë‹¤.
  </Say>
  <Hangup/>
</Response>

```

---

**Twilio ì„¤ì •**

```tsx
// Twilio ê³„ì • ì •ë³´ (í™˜ê²½ë³€ìˆ˜)
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=...
TWILIO_PHONE_NUMBER=+1... (ë°œì‹ ë²ˆí˜¸)

// ìŒì„± ì„¤ì •
{
  voice: "Polly.Seoyeon",        // AWS Polly í•œêµ­ì–´ ì—¬ì„± ëª©ì†Œë¦¬
  language: "ko-KR",             // í•œêµ­ì–´
  timeout: 10,                    // ì…ë ¥ ëŒ€ê¸° 10ì´ˆ
  finishOnKey: "#",              // # ëˆ„ë¥´ë©´ ì…ë ¥ ì™„ë£Œ
}

```

**API ì—”ë“œí¬ì¸íŠ¸**

```tsx
// POST /api/twilio/voice/initiate
// ìŒì„± í†µí™” ë°œì‹ 
interface InitiateCallRequest {
  transaction_id: string;
  user_phone: string;
  merchant_name: string;
  amount: number;
}

interface InitiateCallResponse {
  call_sid: string;
  status: 'queued' | 'ringing' | 'in-progress';
}

// Example
const client = twilio(accountSid, authToken);
const call = await client.calls.create({
  to: userPhone,           // +821012345678
  from: twilioPhone,       // +14155551234
  url: `${baseUrl}/api/twilio/voice/twiml?transaction_id=${txId}`,
  statusCallback: `${baseUrl}/api/twilio/voice/callback`,
  statusCallbackEvent: ['initiated', 'ringing', 'answered', 'completed'],
  record: true,            // ë…¹ìŒ (ì»´í”Œë¼ì´ì–¸ìŠ¤)
  recordingStatusCallback: `${baseUrl}/api/twilio/voice/recording`
});

```

```tsx
// GET /api/twilio/voice/twiml
// TwiML ì‘ë‹µ ìƒì„±
interface TwiMLRequest {
  transaction_id: string;
  question?: 'intro' | 'q1' | 'q2' | 'q3';
  Digits?: string;
}

// Dynamic TwiML ìƒì„±
function generateTwiML(req: TwiMLRequest): string {
  const tx = getTransaction(req.transaction_id);

  if (req.question === 'intro') {
    return `
      <Response>
        <Say voice="Polly.Seoyeon">
          ì•ˆë…•í•˜ì„¸ìš”, ì¼€ì–´í˜ì´ì…ë‹ˆë‹¤.
          ${tx.merchant_name}ì—ì„œ ${formatAmount(tx.amount)}ì›
          ê²°ì œê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.
        </Say>
        <Gather action="/api/twilio/voice/question1?txid=${tx.id}">
          <Say voice="Polly.Seoyeon">
            ì´ ê²°ì œê°€ ë§ìœ¼ì‹œë©´ 1ë²ˆ, ì•„ë‹ˆì‹œë©´ 2ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
          </Say>
        </Gather>
      </Response>
    `;
  }
  // ... ì§ˆë¬¸ë³„ TwiML ìƒì„±
}

```

```tsx
// POST /api/twilio/voice/question1
// ì§ˆë¬¸ 1 ë‹µë³€ ì²˜ë¦¬
interface QuestionResponse {
  CallSid: string;
  Digits: string;  // '1' or '2'
  CallStatus: string;
}

async function handleQuestion1(body: QuestionResponse) {
  const { CallSid, Digits } = body;

  // DBì— ë‹µë³€ ì €ì¥
  await supabase
    .from('voice_responses')
    .insert({
      call_sid: CallSid,
      question_id: 1,
      answer: Digits === '1' ? 'ë„¤' : 'ì•„ë‹ˆìš”',
      timestamp: new Date()
    });

  // ë‹¤ìŒ ì•¡ì…˜ ê²°ì •
  if (Digits === '1') {
    // ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ
    return generateTwiML({ question: 'q2' });
  } else {
    // ë³´ë¥˜ + ë³´í˜¸ì ì•Œë¦¼
    await notifyGuardian(transaction_id, 'suspicious_denial');
    return `
      <Response>
        <Say voice="Polly.Seoyeon">
          í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ë³´í˜¸ìì—ê²Œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
        </Say>
        <Hangup/>
      </Response>
    `;
  }
}

```

---

**Twilio í†µí™” ìƒíƒœ ê´€ë¦¬**

```tsx
// í†µí™” ìƒíƒœ DB ìŠ¤í‚¤ë§ˆ
interface VoiceCall {
  id: string;
  transaction_id: string;
  call_sid: string;
  user_phone: string;
  status: 'queued' | 'ringing' | 'in-progress' | 'completed' | 'failed';
  duration: number;  // ì´ˆ
  responses: {
    question_id: number;
    answer: string;
    timestamp: Date;
  }[];
  final_decision: 'approved' | 'blocked' | 'pending';
  recording_url?: string;
  created_at: Date;
  completed_at?: Date;
}

// í†µí™” ì§„í–‰ ì¶”ì 
const callStatuses = {
  queued: 'ëŒ€ê¸° ì¤‘',
  ringing: 'í˜¸ì¶œ ì¤‘',
  'in-progress': 'í†µí™” ì¤‘',
  completed: 'ì™„ë£Œ',
  busy: 'í†µí™” ì¤‘ (ì‚¬ìš©ì)',
  failed: 'ì‹¤íŒ¨',
  'no-answer': 'ì‘ë‹µ ì—†ìŒ'
};

```

**ì—ëŸ¬ í•¸ë“¤ë§**

```tsx
// í†µí™” ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤

// 1. ì „í™”ë¥¼ ì•ˆ ë°›ëŠ” ê²½ìš° (no-answer)
if (callStatus === 'no-answer') {
  // SMS ë°±ì—… ë°œì†¡
  await sendSMS(userPhone, `
    [ì¼€ì–´í˜ì´] ê³ ìœ„í—˜ ê²°ì œ ê°ì§€
    ê¸ˆì•¡: ${amount}ì›
    ë³´í˜¸ìì—ê²Œ ì•Œë¦¼ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.
    í™•ì¸: ${appUrl}/transactions/${txId}
  `);

  // ë³´í˜¸ì ì•Œë¦¼
  await notifyGuardian(txId, 'user_no_answer');
}

// 2. í†µí™” ì¤‘ì¸ ê²½ìš° (busy)
if (callStatus === 'busy') {
  // 30ì´ˆ í›„ ì¬ì‹œë„
  setTimeout(() => retryCall(callSid), 30000);

  // ë³´í˜¸ì ì¦‰ì‹œ ì•Œë¦¼
  await notifyGuardian(txId, 'user_busy');
}

// 3. ë²ˆí˜¸ ì˜¤ë¥˜ (invalid)
if (callStatus === 'failed') {
  // ê²°ì œ ì¦‰ì‹œ ì°¨ë‹¨
  await blockTransaction(txId);

  // ë³´í˜¸ì ê¸´ê¸‰ ì•Œë¦¼
  await notifyGuardian(txId, 'call_failed_blocked');
}

```

---

### 6.3 ê¸°ëŠ¥ 3: ë³´í˜¸ì ì‹¤ì‹œê°„ ì•Œë¦¼ & ì•¡ì…˜

**ëª©ì **: ê³ ìœ„í—˜ ìƒí™© ì‹œ ë³´í˜¸ìì—ê²Œ ì¦‰ì‹œ ì•Œë¦¼í•˜ê³  ì›í´ë¦­ ì°¨ë‹¨ ê¶Œí•œ ë¶€ì—¬

**User Story**

```
As a ë³´í˜¸ì
I want to ë¶€ëª¨ë‹˜ì˜ ê³ ìœ„í—˜ ê²°ì œ ì‹œ 3ì´ˆ ë‚´ ì•Œë¦¼ì„ ë°›ì•„
So that ì¦‰ì‹œ ì°¨ë‹¨í•˜ì—¬ í”¼í•´ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤

```

**Acceptance Criteria**

```gherkin
Scenario: ê³ ìœ„í—˜ ê²°ì œ ì‹œ ë³´í˜¸ì ì•Œë¦¼
  Given ì‚¬ìš©ìê°€ ë¦¬ìŠ¤í¬ 85ì  ê²°ì œ ì‹œë„
  And ìŒì„± í™•ì¸ì—ì„œ ë³´ì´ìŠ¤í”¼ì‹± ì˜ì‹¬ ë‹µë³€
  When ì‹œìŠ¤í…œì´ ìµœì¢… íŒì • ì™„ë£Œ
  Then 3ì´ˆ ì´ë‚´ ë³´í˜¸ì ì•±ì— í‘¸ì‹œ ì•Œë¦¼ ë„ì°©
  And ì•Œë¦¼ ë‚´ìš©: "âš ï¸ ì–´ë¨¸ë‹ˆ ê³ ìœ„í—˜ ê²°ì œ ê°ì§€ 300ë§Œì›"
  And ì•Œë¦¼ í´ë¦­ ì‹œ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™

Scenario: ë³´í˜¸ì ì¦‰ì‹œ ì°¨ë‹¨
  Given ë³´í˜¸ìê°€ ê³ ìœ„í—˜ ì•Œë¦¼ ìˆ˜ì‹ 
  When ë³´í˜¸ìê°€ [ì¦‰ì‹œ ì°¨ë‹¨] ë²„íŠ¼ í´ë¦­
  Then "ì •ë§ ì°¨ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?" í™•ì¸ ëª¨ë‹¬
  And [ì°¨ë‹¨í•˜ê¸°] í´ë¦­
  Then transaction.status = 'blocked'
  And ì‚¬ìš©ì ì•±ì— "ë³´í˜¸ìê°€ ì•ˆì „ì„ ìœ„í•´ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤" í‘œì‹œ
  And ë³´í˜¸ìì—ê²Œ "ì°¨ë‹¨ ì™„ë£Œ" í™•ì¸ ë©”ì‹œì§€

```

**ë³´í˜¸ì ì´ˆëŒ€ í”Œë¡œìš°**

```
1. ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œì—ì„œ [ë³´í˜¸ì ì¶”ê°€] í´ë¦­
2. ë³´í˜¸ì ì •ë³´ ì…ë ¥
   - ì´ë¦„
   - ì „í™”ë²ˆí˜¸
   - ê´€ê³„ (ìë…€, ë°°ìš°ì, ê¸°íƒ€)
   - ê¶Œí•œ ì„ íƒ:
     â˜‘ ì•Œë¦¼ ë°›ê¸° (í•„ìˆ˜)
     â˜ ì¼ì‹œ ë™ê²° ê¶Œí•œ
     â˜ í•œë„ ì¡°ì • ê¶Œí•œ
3. [ì´ˆëŒ€ ë°œì†¡] í´ë¦­
4. ë³´í˜¸ìì—ê²Œ SMS ë°œì†¡
   "â—‹â—‹ë‹˜ì´ ì¼€ì–´í˜ì´ ë³´í˜¸ìë¡œ ì´ˆëŒ€í–ˆìŠµë‹ˆë‹¤.
    ë§í¬: https://carepay.com/invite/abc123"
5. ë³´í˜¸ìê°€ ë§í¬ í´ë¦­ â†’ ì•± ë‹¤ìš´ë¡œë“œ/ê°€ì…
6. [ìˆ˜ë½] í´ë¦­
7. ì—°ê²° ì™„ë£Œ â†’ ì–‘ì¸¡ì— ì•Œë¦¼

```

**ë³´í˜¸ì ì•Œë¦¼ ë°ì´í„° êµ¬ì¡°**

```tsx
interface GuardianAlert {
  id: string;
  guardian_id: string;
  user_id: string;
  user_name: string;        // "ì–´ë¨¸ë‹ˆ (ê¹€ìˆœì)"
  transaction_id: string;

  // ì•Œë¦¼ ë‚´ìš©
  type: 'risk_detected' | 'voice_failed' | 'payment_blocked';
  severity: 'critical' | 'high' | 'medium';

  // ê±°ë˜ ì •ë³´
  amount: number;
  merchant_name: string;
  merchant_category: string;
  risk_score: number;
  risk_reasons: string[];

  // ìŒì„± í™•ì¸ ê²°ê³¼
  voice_call_status: 'completed' | 'no_answer' | 'failed';
  voice_responses?: {
    question: string;
    answer: string;
  }[];

  // ìƒíƒœ
  is_read: boolean;
  action_taken?: 'blocked' | 'approved' | 'pending';
  action_by?: string;
  action_at?: Date;

  created_at: Date;
  expires_at: Date;  // ìë™ ìŠ¹ì¸ê¹Œì§€ ë‚¨ì€ ì‹œê°„
}

```

**Supabase Realtime êµ¬í˜„**

```tsx
// ë³´í˜¸ì ì•±ì—ì„œ êµ¬ë…
const channel = supabase
  .channel(`guardian:${guardianId}`)
  .on(
    'postgres_changes',
    {
      event: 'INSERT',
      schema: 'public',
      table: 'alerts',
      filter: `guardian_id=eq.${guardianId}`
    },
    (payload) => {
      const alert = payload.new as GuardianAlert;

      // í‘¸ì‹œ ì•Œë¦¼ í‘œì‹œ
      showNotification({
        title: `âš ï¸ ${alert.user_name}`,
        body: `${alert.severity === 'critical' ? 'ê¸´ê¸‰! ' : ''}${formatAmount(alert.amount)}ì› ê²°ì œ ê°ì§€`,
        icon: '/icons/alert.png',
        tag: alert.id,
        requireInteraction: true, // í´ë¦­ ì „ê¹Œì§€ ì•ˆ ì‚¬ë¼ì§
        actions: [
          { action: 'block', title: 'ì¦‰ì‹œ ì°¨ë‹¨' },
          { action: 'view', title: 'ìì„¸íˆ ë³´ê¸°' }
        ]
      });

      // ì•± ë‚´ ì•Œë¦¼ UI ì—…ë°ì´íŠ¸
      addAlertToList(alert);
      updateBadgeCount();
    }
  )
  .subscribe();

```

**ë³´í˜¸ì ëŒ€ì‹œë³´ë“œ UI**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ë¡œê³ ] ì¼€ì–´í˜ì´ (ë³´í˜¸ì)    ğŸ”” 2   [í”„ë¡œí•„]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ ğŸš¨ ê¸´ê¸‰ ì•Œë¦¼                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âš ï¸ ì–´ë¨¸ë‹ˆ (ê¹€ìˆœìë‹˜)                        â”‚   â”‚
â”‚ â”‚ ê³ ìœ„í—˜ ê²°ì œ ê°ì§€ - ë³´ì´ìŠ¤í”¼ì‹± ì˜ì‹¬          â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ ğŸ“‹ ê²°ì œ ì •ë³´                                â”‚   â”‚
â”‚ â”‚ ê¸ˆì•¡: 3,000,000ì›                           â”‚   â”‚
â”‚ â”‚ ê°€ë§¹ì : â—‹â—‹ì˜¨ë¼ì¸ì‡¼í•‘ëª°                     â”‚   â”‚
â”‚ â”‚ ì‹œê°„: ë°©ê¸ˆ ì „ (02:15)                      â”‚   â”‚
â”‚ â”‚ ìœ„í—˜ë„: â›” 85ì  (ë§¤ìš° ë†’ìŒ)                â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ ğŸ¤ ìŒì„± í™•ì¸ ê²°ê³¼                          â”‚   â”‚
â”‚ â”‚ Q: "ì´ ê²°ì œê°€ ë§ë‚˜ìš”?"                      â”‚   â”‚
â”‚ â”‚ A: "ë„¤"                                     â”‚   â”‚
â”‚ â”‚ Q: "ì „í™”ë¡œ ì•ˆë‚´ë°›ìœ¼ì…¨ë‚˜ìš”?"                 â”‚   â”‚
â”‚ â”‚ A: "ë„¤, ê²½ì°°ì´ë¼ê³  í–ˆì–´ìš”"                  â”‚   â”‚
â”‚ â”‚ â†’ ë³´ì´ìŠ¤í”¼ì‹± ê°•ë ¥ ì˜ì‹¬ âš ï¸                 â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ âš¡ ìœ„í—˜ ìš”ì¸                                â”‚   â”‚
â”‚ â”‚ â€¢ í‰ì†Œë³´ë‹¤ ê¸ˆì•¡ì´ 20ë°° í½ë‹ˆë‹¤              â”‚   â”‚
â”‚ â”‚ â€¢ ìƒˆë²½ ì‹œê°„ëŒ€ ê²°ì œì…ë‹ˆë‹¤                    â”‚   â”‚
â”‚ â”‚ â€¢ ì²˜ìŒ ì´ìš©í•˜ëŠ” ê°€ë§¹ì ì…ë‹ˆë‹¤               â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â° 1ë¶„ 30ì´ˆ í›„ ìë™ ìŠ¹ì¸                    â”‚   â”‚
â”‚ â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 60ì´ˆ ë‚¨ìŒ             â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ [ â›” ì¦‰ì‹œ ì°¨ë‹¨ ]                           â”‚   â”‚
â”‚ â”‚ [ âœ“ 1íšŒë§Œ ìŠ¹ì¸ ]                           â”‚   â”‚
â”‚ â”‚ [ ğŸ“ ì–´ë¨¸ë‹ˆê»˜ ì „í™” ]                       â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

**ë³´í˜¸ì ì•¡ì…˜ API**

```tsx
// POST /api/guardians/block-transaction
interface BlockTransactionRequest {
  transaction_id: string;
  guardian_id: string;
  reason?: string;
}

interface BlockTransactionResponse {
  success: boolean;
  transaction: {
    id: string;
    status: 'blocked';
    blocked_by: string;
    blocked_at: Date;
  };
  notification_sent: boolean;
}

// êµ¬í˜„
async function blockTransaction(req: BlockTransactionRequest) {
  // 1. ê¶Œí•œ í™•ì¸
  const guardian = await checkGuardianPermission(
    req.guardian_id,
    req.transaction_id,
    'freeze'
  );

  if (!guardian) {
    throw new Error('ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');
  }

  // 2. ê±°ë˜ ì°¨ë‹¨
  const { data: tx } = await supabase
    .from('transactions')
    .update({
      status: 'blocked',
      blocked_by: req.guardian_id,
      blocked_at: new Date(),
      block_reason: req.reason || 'guardian_action'
    })
    .eq('id', req.transaction_id)
    .select()
    .single();

  // 3. ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
  await supabase.from('alerts').insert({
    user_id: tx.user_id,
    type: 'payment_blocked',
    message: `ë³´í˜¸ì(${guardian.name})ë‹˜ì´ ì•ˆì „ì„ ìœ„í•´ ê²°ì œë¥¼ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤.`,
    transaction_id: tx.id
  });

  // 4. ê°ì‚¬ ë¡œê·¸
  await supabase.from('audit_logs').insert({
    action: 'transaction_blocked',
    actor_id: req.guardian_id,
    actor_type: 'guardian',
    target_id: tx.id,
    target_type: 'transaction',
    metadata: { reason: req.reason }
  });

  return {
    success: true,
    transaction: tx,
    notification_sent: true
  };
}

```

---

### 6.4 ê¸°ëŠ¥ 4: ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ

**ëª©ì **: ì‹¤ì‹œê°„ ì•Œë¦¼, ê²°ì œ í˜„í™©, ë¹ ë¥¸ ì•¡ì…˜ì„ í•œ í™”ë©´ì— í‘œì‹œ

**User Story**

```
As a ì‚¬ìš©ì
I want to ë‚´ ê²°ì œ í˜„í™©ê³¼ ì•Œë¦¼ì„ í•œëˆˆì— ë³´ê³ 
So that ë¬¸ì œê°€ ìˆì„ ë•Œ ë¹ ë¥´ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤

```

**í™”ë©´ êµ¬ì„±**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ë¡œê³ ] ì¼€ì–´í˜ì´        ğŸ”” 3   [â—‹â—‹ë‹˜ â–¼]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ ğŸš¨ ì‹¤ì‹œê°„ ì•Œë¦¼                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âš ï¸ ê²°ì œ ì°¨ë‹¨ë¨ (ë°©ê¸ˆ ì „)                    â”‚   â”‚
â”‚ â”‚ 300ë§Œì› ê²°ì œê°€ ë³´ì´ìŠ¤í”¼ì‹± ì˜ì‹¬ìœ¼ë¡œ ì°¨ë‹¨ë¨   â”‚   â”‚
â”‚ â”‚ [ìì„¸íˆ ë³´ê¸°]                               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ ğŸ“Š ì´ë²ˆ ì£¼ ê²°ì œ ìš”ì•½                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ ì´ ê²°ì œ  â”‚ âœ“ ì•ˆì „   â”‚ âš ï¸ ì£¼ì˜  â”‚ â›” ì°¨ë‹¨  â”‚     â”‚
â”‚ â”‚   23ê±´   â”‚   20ê±´   â”‚    3ê±´   â”‚   0ê±´   â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚ ì´ ì‚¬ìš©: 523,000ì›                                  â”‚
â”‚                                                     â”‚
â”‚ ğŸ¯ ë¹ ë¥¸ ì‘ì—…                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚  ğŸ’³ ê²°ì œ    â”‚  ğŸ“‹ ê²°ì œ    â”‚  ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ë³´í˜¸ì â”‚       â”‚
â”‚ â”‚   í…ŒìŠ¤íŠ¸    â”‚   ë‚´ì—­      â”‚    ê´€ë¦¬     â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                     â”‚
â”‚ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ë³´í˜¸ì                                        â”‚
â”‚ â€¢ ë”¸ (ì´ë¯¸ì˜) - ì•Œë¦¼, ì°¨ë‹¨ ê¶Œí•œ                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

**ì£¼ìš” ì»´í¬ë„ŒíŠ¸**

1. **ì‹¤ì‹œê°„ ì•Œë¦¼ ì„¹ì…˜**

```tsx
interface DashboardAlert {
  id: string;
  type: 'risk' | 'blocked' | 'approved' | 'guardian';
  severity: 'high' | 'medium' | 'low';
  title: string;
  message: string;
  timestamp: Date;
  action?: {
    label: string;
    href: string;
  };
}

// ìš°ì„ ìˆœìœ„
// 1. ì°¨ë‹¨/ë³´ë¥˜ (ë¹¨ê°„ìƒ‰)
// 2. ìŒì„± í™•ì¸ í•„ìš” (ë…¸ë€ìƒ‰)
// 3. ìŠ¹ì¸ ì™„ë£Œ (ì´ˆë¡ìƒ‰)
// 4. ì¼ë°˜ ì•Œë¦¼ (íšŒìƒ‰)

```

1. **ì£¼ê°„ ìš”ì•½ ìœ„ì ¯**

```tsx
interface WeeklySummary {
  total_count: number;
  safe_count: number;
  caution_count: number;
  blocked_count: number;
  total_amount: number;
  period: {
    start: Date;
    end: Date;
  };
}

// ë„ë„› ì°¨íŠ¸ ë˜ëŠ” ë°” ì°¨íŠ¸

```

1. **ë¹ ë¥¸ ì‘ì—… ë²„íŠ¼**
- ê²°ì œ í…ŒìŠ¤íŠ¸: `/user/payment-test`
- ê²°ì œ ë‚´ì—­: `/user/transactions`
- ë³´í˜¸ì ê´€ë¦¬: `/user/guardians`

---

### 6.5 ê¸°ëŠ¥ 5: ê°„ë‹¨í•œ íŒ¨í„´ í•™ìŠµ

**ëª©ì **: ê°œì¸ ê²°ì œ íŒ¨í„´ì„ í•™ìŠµí•˜ì—¬ ì˜¤íƒë¥  ê°ì†Œ

**User Story**

```
As a ì‹œìŠ¤í…œ
I want to ì‚¬ìš©ìì˜ ìŠ¹ì¸ëœ ê²°ì œë¥¼ ë¶„ì„í•˜ì—¬
So that ê°œì¸ ë§ì¶¤ ë¦¬ìŠ¤í¬ íŒì •ìœ¼ë¡œ ì˜¤íƒë¥ ì„ 10% ì´í•˜ë¡œ ë‚®ì¶œ ìˆ˜ ìˆë‹¤

```

**í•™ìŠµ ë°ì´í„°**

```tsx
interface UserPattern {
  user_id: string;

  // ê¸ˆì•¡ í†µê³„
  avg_amount: number;
  median_amount: number;
  max_amount: number;

  // ì‹œê°„ íŒ¨í„´
  common_hours: number[];  // 20% ì´ìƒ ë“±ì¥í•œ ì‹œê°„
  peak_hour: number;       // ê°€ì¥ ë§ì´ ì‚¬ìš©í•œ ì‹œê°„

  // ì¥ì†Œ/ì—…ì¢… íŒ¨í„´
  common_categories: string[];  // TOP 3
  trusted_merchants: string[];  // TOP 5

  // ë©”íƒ€ë°ì´í„°
  total_transactions: number;
  learning_period_days: number;
  last_updated: Date;
}

```

**í•™ìŠµ ë¡œì§**

```tsx
async function updateUserPattern(userId: string) {
  // ìµœê·¼ 30ì¼ ìŠ¹ì¸ëœ ê²°ì œë§Œ
  const { data: transactions } = await supabase
    .from('transactions')
    .select('*')
    .eq('user_id', userId)
    .eq('status', 'approved')
    .gte('created_at', thirtyDaysAgo())
    .order('created_at', { ascending: false });

  if (transactions.length < 5) {
    // ë°ì´í„° ë¶€ì¡± â†’ ë³´ìˆ˜ì  ê¸°ë³¸ê°’
    return {
      avg_amount: 50000,
      max_amount: 200000,
      common_hours: [9,10,11,12,13,14,15,16,17,18,19,20],
      common_categories: [],
      trusted_merchants: []
    };
  }

  // í†µê³„ ê³„ì‚°
  const amounts = transactions.map(t => t.amount);
  const hours = transactions.map(t =>
    new Date(t.created_at).getHours()
  );
  const categories = transactions.map(t => t.merchant_category);
  const merchants = transactions.map(t => t.merchant_name);

  const pattern = {
    user_id: userId,
    avg_amount: mean(amounts),
    median_amount: median(amounts),
    max_amount: Math.max(...amounts),
    common_hours: getFrequentValues(hours, 0.2),
    peak_hour: mode(hours),
    common_categories: getTopN(categories, 3),
    trusted_merchants: getTopN(merchants, 5),
    total_transactions: transactions.length,
    learning_period_days: 30,
    last_updated: new Date()
  };

  // DB ì—…ë°ì´íŠ¸
  await supabase.from('patterns').upsert(pattern);

  return pattern;
}

```

**ìë™ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°**

```sql
-- ìŠ¹ì¸ëœ ê²°ì œë§ˆë‹¤ íŒ¨í„´ ì¬í•™ìŠµ
CREATE OR REPLACE FUNCTION update_pattern_on_approval()
RETURNS TRIGGER AS $$
BEGIN
  IF NEW.status = 'approved' AND OLD.status != 'approved' THEN
    -- ë¹„ë™ê¸° ì‘ì—… íì— ì¶”ê°€
    PERFORM pg_notify(
      'pattern_update',
      json_build_object('user_id', NEW.user_id)::text
    );
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER transaction_approved
  AFTER UPDATE ON transactions
  FOR EACH ROW
  EXECUTE FUNCTION update_pattern_on_approval();

```

---

## 7. ì‚¬ìš©ì í”Œë¡œìš°

### 7.1 ì „ì²´ í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì‚¬ìš©ì ê°€ì…                         â”‚
â”‚   ì´ë©”ì¼ ì¸ì¦ â†’ í”„ë¡œí•„ ì„¤ì • â†’ ë³´í˜¸ì ì´ˆëŒ€ (ì„ íƒ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  2ì£¼ê°„ íŒ¨í„´ í•™ìŠµ ê¸°ê°„   â”‚
        â”‚  (ì •ìƒ ê²°ì œ 10-20ê±´)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ì¼ìƒì  ê²°ì œ                          â”‚
â”‚          ë‚®ì€ ë¦¬ìŠ¤í¬ (0-30ì )                        â”‚
â”‚               â†“                                     â”‚
â”‚          ìë™ ìŠ¹ì¸ âœ“                                â”‚
â”‚          ì•Œë¦¼ ì—†ìŒ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ê³ ìœ„í—˜ ê²°ì œ ì‹œë„                       â”‚
â”‚         ë¦¬ìŠ¤í¬ 61-100ì                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ê²°ì œ ì¼ì‹œ ë³´ë¥˜ (3ë¶„)  â”‚
        â”‚   Twilio í†µí™” ë°œì‹      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ìŒì„± í™•ì¸ (30ì´ˆ)     â”‚
        â”‚   3ë‹¨ê³„ ì§ˆë¬¸           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                       â†“
    [ì •ìƒ ë‹µë³€]            [ì˜ì‹¬ ë‹µë³€]
         â†“                       â†“
    ë³´í˜¸ì ì•Œë¦¼           ë³´í˜¸ì ê¸´ê¸‰ ì•Œë¦¼
    (ì°¸ê³ ìš©)               (ì¦‰ì‹œ ê°œì… ìš”ì²­)
         â†“                       â†“
    ì‚¬ìš©ì ìŠ¹ì¸ ëŒ€ê¸°        ë³´í˜¸ì ì•¡ì…˜ ëŒ€ê¸°
         â†“                       â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â†“         â†“          â†“               â†“
  ìŠ¹ì¸      ë³´ë¥˜      ì¦‰ì‹œ ì°¨ë‹¨      1íšŒ ìŠ¹ì¸
    â†“         â†“          â†“               â†“
  ê²°ì œ ì§„í–‰  í™•ì¸ í›„   ê²°ì œ ì°¨ë‹¨    ê²°ì œ ì§„í–‰
            ê²°ì •       + ì‹ ê³  ì•ˆë‚´   + ë¡œê·¸ ê¸°ë¡

```

---

### 7.2 ìƒì„¸ ì‹œë‚˜ë¦¬ì˜¤ (Happy Path)

**ì‹œë‚˜ë¦¬ì˜¤: ìƒˆë²½ ê³ ì•¡ ê²°ì œ â†’ ìŒì„± í™•ì¸ â†’ ì°¨ë‹¨**

```
ì‹œê°„: ìƒˆë²½ 2:15
ì¥ì†Œ: ì§‘ (ì¹¨ëŒ€)
ìƒí™©: ë³´ì´ìŠ¤í”¼ì‹± ì „í™” ë°›ê³  ê²°ì œ ì‹œë„

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[2:10] ì „í™” ìˆ˜ì‹ 
ğŸ“ "ì–´ë¨¸ë‹ˆ, ê¸ˆìœµê°ë…ì›ì…ë‹ˆë‹¤.
    ê³„ì¢Œê°€ í•´í‚¹ë‹¹í–ˆì–´ìš”.
    ì§€ê¸ˆ ì•ˆì „ê³„ì¢Œë¡œ ì˜®ê¸°ì…”ì•¼ í•©ë‹ˆë‹¤."

[2:12] ë‹¹í™©í•´ì„œ ì€í–‰ ì•± ì‹¤í–‰
  â†’ ì‚¬ê¸°ë²” ì§€ì‹œëŒ€ë¡œ ì´ì²´ í™”ë©´ê¹Œì§€ ì§„í–‰

[2:15] 300ë§Œì› ì´ì²´ ë²„íŠ¼ í´ë¦­
  â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ [ì¼€ì–´í˜ì´ ì‹œìŠ¤í…œ ì‘ë™]          â”‚
  â”‚                                 â”‚
  â”‚ 1. ë¦¬ìŠ¤í¬ ë¶„ì„ (0.2ì´ˆ)          â”‚
  â”‚    - ê¸ˆì•¡: í‰ê·  ëŒ€ë¹„ 20ë°° (+40) â”‚
  â”‚    - ì‹œê°„: ìƒˆë²½ 2ì‹œ (+20)       â”‚
  â”‚    - ê°€ë§¹ì : ì²˜ìŒ (+15)         â”‚
  â”‚    - ìµœê·¼ í†µí™”: êµ­ì œë²ˆí˜¸ (+10)  â”‚
  â”‚    â†’ ì´ì : 85ì  (ë§¤ìš° ë†’ìŒ)     â”‚
  â”‚                                 â”‚
  â”‚ 2. ê²°ì œ ë³´ë¥˜ (3ë¶„)              â”‚
  â”‚                                 â”‚
  â”‚ 3. Twilio í†µí™” ë°œì‹  (10ì´ˆ ë‚´)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[2:15:30] ì „í™”ë²¨ ìš¸ë¦¼
ğŸ“± "ì¼€ì–´í˜ì´ ê°€ë””ì–¸ì…ë‹ˆë‹¤"

[2:15:35] ì–´ë¨¸ë‹ˆê°€ ì „í™” ë°›ìŒ
ğŸ”Š TTS: "ì•ˆë…•í•˜ì„¸ìš”, ì¼€ì–´í˜ì´ì…ë‹ˆë‹¤.
         ê³ ì•¡ ê²°ì œê°€ ê°ì§€ë˜ì–´ í™•ì¸ì°¨ ì „í™”ë“œë¦½ë‹ˆë‹¤."

[2:15:45] ì§ˆë¬¸ 1
ğŸ”Š "ì§€ê¸ˆ ì˜¨ë¼ì¸ì‡¼í•‘ëª°ì—ì„œ 300ë§Œì›ì„
    ë³´ë‚´ì‹œë ¤ëŠ” ê²Œ ë§ë‚˜ìš”?
    ë§ìœ¼ì‹œë©´ 1ë²ˆ, ì•„ë‹ˆì‹œë©´ 2ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."

ğŸ“ ì–´ë¨¸ë‹ˆ: [1ë²ˆ ëˆ„ë¦„] "ë„¤..."

[2:15:55] ì§ˆë¬¸ 2
ğŸ”Š "ëˆ„êµ°ê°€ì—ê²Œ ì „í™”ë‚˜ ë¬¸ìë¡œ
    ì•ˆë‚´ë¥¼ ë°›ìœ¼ì…¨ë‚˜ìš”?
    ë°›ìœ¼ì…¨ìœ¼ë©´ 1ë²ˆ, ì•ˆ ë°›ìœ¼ì…¨ìœ¼ë©´ 2ë²ˆ."

ğŸ“ ì–´ë¨¸ë‹ˆ: [1ë²ˆ ëˆ„ë¦„] "ë„¤, ê¸ˆê°ì›ì´ë¼ê³ ..."

[2:16:05] ì§ˆë¬¸ 3 (ì¡°ê±´ë¶€)
ğŸ”Š "ì€í–‰, ê²½ì°°, ê²€ì°°, ê¸ˆìœµê°ë…ì›ì´ë¼ê³  í–ˆë‚˜ìš”?
    ê·¸ë ‡ë‹¤ë©´ 1ë²ˆ, ì•„ë‹ˆë©´ 2ë²ˆ."

ğŸ“ ì–´ë¨¸ë‹ˆ: [1ë²ˆ ëˆ„ë¦„] "ë„¤..."

[2:16:15] ìµœì¢… íŒì •
ğŸ”Š "âš ï¸ ì£¼ì˜í•˜ì‹­ì‹œì˜¤!
    ì€í–‰ì´ë‚˜ ê²½ì°°ì€ ì ˆëŒ€ ì „í™”ë¡œ
    ê³„ì¢Œì´ì²´ë¥¼ ìš”êµ¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

    ë³´ì´ìŠ¤í”¼ì‹±ì´ ê°•ë ¥íˆ ì˜ì‹¬ë˜ì–´
    ê²°ì œë¥¼ ì¦‰ì‹œ ì°¨ë‹¨í•©ë‹ˆë‹¤.

    ë³´í˜¸ìë¶„ê»˜ ê¸´ê¸‰ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

    112 ê²½ì°°ì²­ì´ë‚˜ 1332 ê¸ˆìœµê°ë…ì›ìœ¼ë¡œ
    ì‹ ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤."

ğŸ“ [í†µí™” ì¢…ë£Œ]

[2:16:20] ì‹œìŠ¤í…œ ìë™ ì²˜ë¦¬
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1. ê²°ì œ ì°¨ë‹¨                  â”‚
  â”‚ 2. DB ì €ì¥ (status: blocked)  â”‚
  â”‚ 3. ë³´í˜¸ì ê¸´ê¸‰ ì•Œë¦¼ ë°œì†¡      â”‚
  â”‚ 4. ì‚¬ìš©ì ì•± ì•Œë¦¼             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[2:16:23] ë”¸(ë³´í˜¸ì) ìŠ¤ë§ˆíŠ¸í°
ğŸ“± [ì§„ë™ + ì•Œë¦¼ìŒ]
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âš ï¸ ì¼€ì–´í˜ì´ ê¸´ê¸‰ ì•Œë¦¼            â”‚
  â”‚                                 â”‚
  â”‚ ì–´ë¨¸ë‹ˆ (ê¹€ìˆœìë‹˜)               â”‚
  â”‚ ê³ ìœ„í—˜ ê²°ì œ ì°¨ë‹¨ë¨              â”‚
  â”‚                                 â”‚
  â”‚ ê¸ˆì•¡: 300ë§Œì›                   â”‚
  â”‚ ì‚¬ìœ : ë³´ì´ìŠ¤í”¼ì‹± ì˜ì‹¬           â”‚
  â”‚ ì‹œê°„: ë°©ê¸ˆ ì „ (02:16)          â”‚
  â”‚                                 â”‚
  â”‚ [ìì„¸íˆ ë³´ê¸°]                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[2:16:30] ë”¸ì´ ì•Œë¦¼ í™•ì¸
  â†’ ì•± ì—´ê¸° â†’ ìƒì„¸ ì •ë³´ í™•ì¸
  â†’ "ì–´ë¨¸ë‹ˆê»˜ ì „í™”í•˜ê¸°" í´ë¦­

[2:17:00] ë”¸ì´ ì–´ë¨¸ë‹ˆê»˜ ì „í™”
ğŸ“ "ì—„ë§ˆ, ì§€ê¸ˆ ëˆ„êµ¬í•œí…Œ ì „í™” ë°›ìœ¼ì…¨ì–´ìš”?"
   "ê¸ˆê°ì›ì´ë¼ê³ ìš”? ê·¸ê±° ì‚¬ê¸°ì˜ˆìš”!"
   "ë‹¤í–‰íˆ ì¼€ì–´í˜ì´ê°€ ë§‰ì•˜ì–´ìš”."

[2:20:00] ë”¸ì´ 112 ì‹ ê³  ë„ì™€ë“œë¦¼

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ê²°ê³¼: 300ë§Œì› í”¼í•´ ì›ì²œ ì°¨ë‹¨ âœ“

```

---

## 8. ê¸°ìˆ  ìš”êµ¬ì‚¬í•­

### 8.1 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì‚¬ìš©ì                           â”‚
â”‚              (Web Browser / Mobile)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Vercel Edge Network                    â”‚
â”‚          (CDN + Edge Functions)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Next.js 14 App  â”‚    â”‚   Twilio Voice   â”‚
â”‚  App Router      â”‚â†â”€â”€â†’â”‚      API         â”‚
â”‚  React Server    â”‚    â”‚  (ìŒì„± í†µí™”)     â”‚
â”‚  Components      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Supabase Backend                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL 15     â”‚  Realtime       â”‚  Auth        â”‚
â”‚  (Main DB)         â”‚  (WebSocket)    â”‚  (JWT)       â”‚
â”‚                    â”‚                 â”‚              â”‚
â”‚  Storage           â”‚  Functions      â”‚  Row Level   â”‚
â”‚  (ë…¹ìŒ íŒŒì¼)        â”‚  (íŠ¸ë¦¬ê±°)        â”‚  Security    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

### 8.2 ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

**Frontend**

```json
{
  "framework": "Next.js 14.0.4",
  "language": "TypeScript 5.3",
  "runtime": "Node.js 20 LTS",
  "ui": {
    "styling": "Tailwind CSS 3.4",
    "components": "shadcn/ui",
    "icons": "Lucide React"
  },
  "state": "Zustand 4.4",
  "forms": "React Hook Form + Zod",
  "charts": "Recharts 2.10",
  "realtime": "Supabase Realtime Client"
}

```

**Backend**

```json
{
  "hosting": "Vercel",
  "functions": "Vercel Edge Functions",
  "database": {
    "primary": "Supabase PostgreSQL 15",
    "orm": "Supabase JS Client",
    "migrations": "Supabase CLI"
  },
  "auth": "Supabase Auth (JWT)",
  "realtime": "Supabase Realtime (WebSocket)",
  "storage": "Supabase Storage"
}

```

**Third-Party APIs**

```json
{
  "voice": {
    "provider": "Twilio",
    "products": [
      "Programmable Voice",
      "TwiML",
      "Voice Insights"
    ],
    "tts": "AWS Polly (via Twilio)",
    "voice": "Polly.Seoyeon (í•œêµ­ì–´ ì—¬ì„±)"
  },
  "monitoring": {
    "errors": "Vercel Analytics",
    "performance": "Web Vitals",
    "logging": "Supabase Logs"
  }
}

```

---

### 8.3 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

**í•µì‹¬ í…Œì´ë¸”**

```sql
-- 1. users (ì‚¬ìš©ì)
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email TEXT UNIQUE NOT NULL,
  phone TEXT,
  name TEXT NOT NULL,
  role TEXT CHECK (role IN ('user', 'guardian')) DEFAULT 'user',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. transactions (ê²°ì œ ê¸°ë¡)
CREATE TABLE transactions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,

  -- ê²°ì œ ì •ë³´
  amount DECIMAL(10,2) NOT NULL,
  merchant_name TEXT NOT NULL,
  merchant_category TEXT,

  -- ë¦¬ìŠ¤í¬ ë¶„ì„
  risk_score INTEGER CHECK (risk_score BETWEEN 0 AND 100),
  risk_level TEXT CHECK (risk_level IN ('low', 'medium', 'high', 'critical')),
  risk_reasons JSONB,

  -- ìƒíƒœ
  status TEXT CHECK (status IN ('pending', 'approved', 'blocked', 'voice_verification')) DEFAULT 'pending',

  -- ìŒì„± í™•ì¸
  voice_call_sid TEXT,
  voice_call_status TEXT,
  voice_responses JSONB,

  -- ë³´í˜¸ì ì•¡ì…˜
  guardian_action TEXT CHECK (guardian_action IN ('blocked', 'approved')),
  guardian_id UUID REFERENCES users(id),
  guardian_action_at TIMESTAMPTZ,

  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_tx_user_created ON transactions(user_id, created_at DESC);
CREATE INDEX idx_tx_status ON transactions(status) WHERE status = 'pending';

-- 3. voice_calls (ìŒì„± í†µí™” ê¸°ë¡)
CREATE TABLE voice_calls (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  transaction_id UUID REFERENCES transactions(id),
  call_sid TEXT UNIQUE NOT NULL,

  -- í†µí™” ì •ë³´
  from_number TEXT,
  to_number TEXT,
  status TEXT,
  duration INTEGER,  -- ì´ˆ

  -- ì‘ë‹µ ê¸°ë¡
  responses JSONB,  -- [{question_id: 1, answer: "1", timestamp: "..."}]

  -- ë…¹ìŒ
  recording_url TEXT,
  recording_duration INTEGER,

  -- íŒì •
  final_decision TEXT CHECK (final_decision IN ('approved', 'blocked', 'pending')),

  created_at TIMESTAMPTZ DEFAULT NOW(),
  completed_at TIMESTAMPTZ
);

-- 4. guardians (ë³´í˜¸ì ê´€ê³„)
CREATE TABLE guardians (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  guardian_id UUID REFERENCES users(id) ON DELETE CASCADE,

  -- ê¶Œí•œ
  permissions JSONB DEFAULT '{"notify": true, "freeze": false, "approve": false}',

  -- ìƒíƒœ
  status TEXT CHECK (status IN ('pending', 'active', 'rejected')) DEFAULT 'pending',

  created_at TIMESTAMPTZ DEFAULT NOW(),
  accepted_at TIMESTAMPTZ,

  UNIQUE(user_id, guardian_id)
);

-- 5. alerts (ì•Œë¦¼)
CREATE TABLE alerts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id),
  guardian_id UUID REFERENCES users(id),
  transaction_id UUID REFERENCES transactions(id),

  -- ì•Œë¦¼ ë‚´ìš©
  type TEXT CHECK (type IN ('risk_detected', 'payment_blocked', 'voice_failed')),
  severity TEXT CHECK (severity IN ('critical', 'high', 'medium', 'low')),
  title TEXT,
  message TEXT,

  -- ìƒíƒœ
  is_read BOOLEAN DEFAULT FALSE,
  read_at TIMESTAMPTZ,

  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_alerts_guardian ON alerts(guardian_id, is_read, created_at DESC);

-- 6. patterns (ì‚¬ìš©ì íŒ¨í„´)
CREATE TABLE patterns (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) UNIQUE,

  -- ê¸ˆì•¡ í†µê³„
  avg_amount DECIMAL(10,2),
  median_amount DECIMAL(10,2),
  max_amount DECIMAL(10,2),

  -- ì‹œê°„ íŒ¨í„´
  common_hours INTEGER[],
  peak_hour INTEGER,

  -- ì¥ì†Œ/ì—…ì¢…
  common_categories TEXT[],
  trusted_merchants TEXT[],

  -- ë©”íƒ€
  total_transactions INTEGER DEFAULT 0,
  learning_period_days INTEGER DEFAULT 30,

  updated_at TIMESTAMPTZ DEFAULT NOW()
);

```

---

## 9. Twilio í†µí•© ëª…ì„¸

### 9.1 Twilio ê³„ì • ì„¤ì •

**í•„ìˆ˜ ì¤€ë¹„ì‚¬í•­**

```bash
# 1. Twilio ê³„ì • ìƒì„±
# https://www.twilio.com/try-twilio

# 2. ì „í™”ë²ˆí˜¸ êµ¬ë§¤
# Type: Voice-capable
# Country: South Korea (+82) ë˜ëŠ” US (+1)
# Price: ~$1/month

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=...
TWILIO_PHONE_NUMBER=+1...  # ë°œì‹ ë²ˆí˜¸

# 4. Webhook URL ì„¤ì •
# Voice: https://your-domain.com/api/twilio/voice/twiml
# Status Callback: https://your-domain.com/api/twilio/voice/callback

```

---

### 9.2 Twilio SDK ì´ˆê¸°í™”

```tsx
// /lib/twilio.ts
import twilio from 'twilio';

const accountSid = process.env.TWILIO_ACCOUNT_SID!;
const authToken = process.env.TWILIO_AUTH_TOKEN!;
const twilioPhone = process.env.TWILIO_PHONE_NUMBER!;

export const twilioClient = twilio(accountSid, authToken);

export const TWILIO_CONFIG = {
  voice: 'Polly.Seoyeon',     // AWS Polly í•œêµ­ì–´ ì—¬ì„±
  language: 'ko-KR',
  timeout: 10,                 // ì…ë ¥ ëŒ€ê¸° 10ì´ˆ
  maxCallDuration: 300,        // ìµœëŒ€ í†µí™” ì‹œê°„ 5ë¶„
  record: true,                // ë…¹ìŒ í™œì„±í™”
  trim: 'trim-silence'         // ë¬´ìŒ ì œê±°
};

```

---

### 9.3 ì•„ì›ƒë°”ìš´ë“œ í†µí™” ë°œì‹ 

```tsx
// /app/api/twilio/voice/initiate/route.ts
import { twilioClient, TWILIO_CONFIG } from '@/lib/twilio';

export async function POST(req: Request) {
  const { transaction_id, user_phone } = await req.json();

  // ê±°ë˜ ì •ë³´ ì¡°íšŒ
  const { data: tx } = await supabase
    .from('transactions')
    .select('*')
    .eq('id', transaction_id)
    .single();

  if (!tx) {
    return Response.json({ error: 'Transaction not found' }, { status: 404 });
  }

  try {
    // Twilio í†µí™” ë°œì‹ 
    const call = await twilioClient.calls.create({
      to: user_phone,           // ì‚¬ìš©ì ì „í™”ë²ˆí˜¸
      from: process.env.TWILIO_PHONE_NUMBER!,
      url: `${process.env.NEXT_PUBLIC_BASE_URL}/api/twilio/voice/twiml?txid=${tx.id}`,
      statusCallback: `${process.env.NEXT_PUBLIC_BASE_URL}/api/twilio/voice/callback`,
      statusCallbackEvent: ['initiated', 'ringing', 'answered', 'completed'],
      record: TWILIO_CONFIG.record,
      recordingStatusCallback: `${process.env.NEXT_PUBLIC_BASE_URL}/api/twilio/voice/recording`,
      trim: TWILIO_CONFIG.trim,
      timeout: 30,  // 30ì´ˆ í›„ no-answer
    });

    // DB ì €ì¥
    await supabase.from('voice_calls').insert({
      transaction_id: tx.id,
      call_sid: call.sid,
      from_number: call.from,
      to_number: call.to,
      status: call.status
    });

    await supabase
      .from('transactions')
      .update({
        voice_call_sid: call.sid,
        voice_call_status: 'initiated'
      })
      .eq('id', tx.id);

    return Response.json({
      success: true,
      call_sid: call.sid,
      status: call.status
    });

  } catch (error) {
    console.error('Twilio call failed:', error);

    // ì‹¤íŒ¨ ì‹œ SMS ë°±ì—…
    await sendSMSBackup(user_phone, tx);

    return Response.json({
      error: 'Call initiation failed',
      details: error.message
    }, { status: 500 });
  }
}

```

---

### 9.4 TwiML ë™ì  ìƒì„±

```tsx
// /app/api/twilio/voice/twiml/route.ts
import { VoiceResponse } from 'twilio/lib/twiml/VoiceResponse';

export async function POST(req: Request) {
  const { searchParams } = new URL(req.url);
  const txid = searchParams.get('txid');
  const question = searchParams.get('q') || 'intro';
  const digits = searchParams.get('Digits');

  // ê±°ë˜ ì •ë³´ ì¡°íšŒ
  const { data: tx } = await supabase
    .from('transactions')
    .select('*')
    .eq('id', txid)
    .single();

  const twiml = new VoiceResponse();

  // ì§ˆë¬¸ë³„ TwiML ìƒì„±
  if (question === 'intro') {
    twiml.say(
      {
        voice: 'Polly.Seoyeon',
        language: 'ko-KR'
      },
      `ì•ˆë…•í•˜ì„¸ìš”, ì¼€ì–´í˜ì´ ê°€ë””ì–¸ì…ë‹ˆë‹¤. ${tx.merchant_name}ì—ì„œ ${formatAmount(tx.amount)}ì› ê²°ì œê°€ ê°ì§€ë˜ì–´ í™•ì¸ ì „í™”ë¥¼ ë“œë¦½ë‹ˆë‹¤.`
    );

    twiml.pause({ length: 1 });

    const gather = twiml.gather({
      input: ['dtmf'],
      numDigits: 1,
      timeout: 10,
      action: `/api/twilio/voice/question1?txid=${txid}`
    });

    gather.say(
      { voice: 'Polly.Seoyeon', language: 'ko-KR' },
      'ì´ ê²°ì œê°€ ë§ìœ¼ì‹œë©´ 1ë²ˆ, ì•„ë‹ˆì‹œë©´ 2ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.'
    );

    // 10ì´ˆ ë‚´ ì…ë ¥ ì—†ìœ¼ë©´
    twiml.say(
      { voice: 'Polly.Seoyeon', language: 'ko-KR' },
      'ì‘ë‹µì´ ì—†ì–´ ë³´í˜¸ìì—ê²Œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.'
    );
    twiml.hangup();
  }

  // ... ë‹¤ë¥¸ ì§ˆë¬¸ë“¤ (ì´ì „ ì„¹ì…˜ ì°¸ì¡°)

  return new Response(twiml.toString(), {
    headers: { 'Content-Type': 'text/xml' }
  });
}

function formatAmount(amount: number): string {
  return new Intl.NumberFormat('ko-KR').format(amount);
}

```

---

### 9.5 í†µí™” ìƒíƒœ ì½œë°±

```tsx
// /app/api/twilio/voice/callback/route.ts
export async function POST(req: Request) {
  const formData = await req.formData();

  const callSid = formData.get('CallSid') as string;
  const callStatus = formData.get('CallStatus') as string;
  const callDuration = formData.get('CallDuration') as string;

  // DB ì—…ë°ì´íŠ¸
  await supabase
    .from('voice_calls')
    .update({
      status: callStatus,
      duration: parseInt(callDuration || '0'),
      completed_at: callStatus === 'completed' ? new Date() : null
    })
    .eq('call_sid', callSid);

  // í†µí™” ì‹¤íŒ¨ ì²˜ë¦¬
  if (['busy', 'no-answer', 'failed'].includes(callStatus)) {
    const { data: call } = await supabase
      .from('voice_calls')
      .select('transaction_id')
      .eq('call_sid', callSid)
      .single();

    if (call) {
      await handleCallFailure(call.transaction_id, callStatus);
    }
  }

  return new Response('OK', { status: 200 });
}

async function handleCallFailure(txId: string, reason: string) {
  // 1. SMS ë°±ì—… ë°œì†¡
  // 2. ë³´í˜¸ì ì¦‰ì‹œ ì•Œë¦¼
  // 3. ê²°ì œ ë³´ë¥˜ ì—°ì¥ (5ë¶„ â†’ 10ë¶„)
}

```

---

### 9.6 ë…¹ìŒ íŒŒì¼ ì €ì¥

```tsx
// /app/api/twilio/voice/recording/route.ts
export async function POST(req: Request) {
  const formData = await req.formData();

  const recordingSid = formData.get('RecordingSid') as string;
  const recordingUrl = formData.get('RecordingUrl') as string;
  const callSid = formData.get('CallSid') as string;
  const duration = formData.get('RecordingDuration') as string;

  // Supabase Storageì— ì €ì¥
  const audioFile = await fetch(`${recordingUrl}.mp3`).then(r => r.blob());

  const { data, error } = await supabase.storage
    .from('voice-recordings')
    .upload(
      `${callSid}/${recordingSid}.mp3`,
      audioFile,
      { contentType: 'audio/mpeg' }
    );

  if (!error) {
    // DB ì—…ë°ì´íŠ¸
    await supabase
      .from('voice_calls')
      .update({
        recording_url: data.path,
        recording_duration: parseInt(duration)
      })
      .eq('call_sid', callSid);
  }

  return new Response('OK', { status: 200 });
}

```

---

## 10. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 10.1 ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­

**ì‘ë‹µ ì‹œê°„**

| ê¸°ëŠ¥ | ëª©í‘œ ì‘ë‹µ ì‹œê°„ | ìµœëŒ€ í—ˆìš© ì‹œê°„ | ì¸¡ì • ë°©ë²• |
| --- | --- | --- | --- |
| í˜ì´ì§€ ë¡œë“œ (First Contentful Paint) | < 1.5ì´ˆ | < 3ì´ˆ | Lighthouse |
| ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ ê³„ì‚° | < 200ms | < 500ms | API ë¡œê·¸ |
| Twilio í†µí™” ë°œì‹  | < 10ì´ˆ | < 20ì´ˆ | Twilio Insights |
| ë³´í˜¸ì ì•Œë¦¼ ë„ì°© | < 3ì´ˆ | < 5ì´ˆ | Supabase Realtime |
| ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ | < 100ms | < 300ms | pg_stat_statements |

**ì²˜ë¦¬ëŸ‰**

```
ë™ì‹œ ì‚¬ìš©ì: 100ëª… (MVP)
  â””â”€ ì´ˆë‹¹ ìš”ì²­: ~10 req/s
  â””â”€ ë™ì‹œ ìŒì„± í†µí™”: 5-10ê±´

í™•ì¥ ëª©í‘œ (6ê°œì›”):
  â””â”€ ë™ì‹œ ì‚¬ìš©ì: 1,000ëª…
  â””â”€ ì´ˆë‹¹ ìš”ì²­: ~100 req/s
  â””â”€ ë™ì‹œ ìŒì„± í†µí™”: 50ê±´

```

**ë¦¬ì†ŒìŠ¤ ì œí•œ**

```
Vercel (Hobby Plan â†’ Pro Plan)
  - Edge Functions: 100 GB-Hours/month
  - Bandwidth: 100 GB/month
  - Builds: Unlimited

Supabase (Free â†’ Pro Plan)
  - Database: 500 MB â†’ 8 GB
  - Storage: 1 GB â†’ 100 GB
  - Realtime: 200 concurrent â†’ 500 concurrent

Twilio (Pay-as-you-go)
  - Voice: $0.0085/min (ì•„ì›ƒë°”ìš´ë“œ, í•œêµ­)
  - Recording: $0.0025/min
  - Storage: $0.05/GB/month

  ì˜ˆì‚° (100ê±´/ì¼ ê¸°ì¤€):
    - í†µí™”ë¹„: 100ê±´ Ã— 1ë¶„ Ã— $0.0085 = $0.85/day
    - ë…¹ìŒ: 100ê±´ Ã— 1ë¶„ Ã— $0.0025 = $0.25/day
    - ì›”ê°„: ~$33/month

```

---

### 10.2 ë³´ì•ˆ ìš”êµ¬ì‚¬í•­

**ì¸ì¦ ë° ì¸ê°€**

```tsx
// Row Level Security (RLS) ì •ì±…

-- ì‚¬ìš©ìëŠ” ë³¸ì¸ ê±°ë˜ë§Œ ì¡°íšŒ
CREATE POLICY "Users view own transactions"
ON transactions FOR SELECT
USING (auth.uid() = user_id);

-- ë³´í˜¸ìëŠ” í”¼ë³´í˜¸ì ê±°ë˜ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Guardians view protected users"
ON transactions FOR SELECT
USING (
  user_id IN (
    SELECT user_id FROM guardians
    WHERE guardian_id = auth.uid()
    AND status = 'active'
  )
);

-- ë³´í˜¸ìëŠ” ê¶Œí•œì´ ìˆëŠ” ê±°ë˜ë§Œ ì°¨ë‹¨ ê°€ëŠ¥
CREATE POLICY "Guardians block with permission"
ON transactions FOR UPDATE
USING (
  user_id IN (
    SELECT user_id FROM guardians
    WHERE guardian_id = auth.uid()
    AND status = 'active'
    AND permissions->>'freeze' = 'true'
  )
);

```

**ë°ì´í„° ì•”í˜¸í™”**

```
ì „ì†¡ ì¤‘ (In-Transit):
  âœ… TLS 1.3 (Vercel ê¸°ë³¸)
  âœ… HTTPS ê°•ì œ (HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸)
  âœ… Twilio Webhook: HTTPS only
  âœ… WebSocket: WSS (Secure)

ì €ì¥ ì‹œ (At-Rest):
  âœ… Supabase PostgreSQL: AES-256 ì•”í˜¸í™”
  âœ… ë…¹ìŒ íŒŒì¼: Supabase Storage ì•”í˜¸í™”
  âœ… ë¯¼ê° ì •ë³´ (ì „í™”ë²ˆí˜¸): í•´ì‹œ ì €ì¥ ê³ ë ¤

ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨:
  âœ… JWT í† í°: 1ì‹œê°„ ë§Œë£Œ
  âœ… Refresh Token: HttpOnly ì¿ í‚¤, 30ì¼
  âœ… API Key: í™˜ê²½ë³€ìˆ˜ë§Œ (ì½”ë“œ ë‚´ í•˜ë“œì½”ë”© ê¸ˆì§€)

```

**ê°œì¸ì •ë³´ ë³´í˜¸**

```tsx
// GDPR/ê°œì¸ì •ë³´ë³´í˜¸ë²• ì¤€ìˆ˜

// 1. ìµœì†Œ ìˆ˜ì§‘ ì›ì¹™
interface MinimalUserData {
  // ìˆ˜ì§‘í•¨
  phone: string;              // ìŒì„± í†µí™”ìš©
  name: string;               // ì‹ë³„ìš©

  // ìˆ˜ì§‘ ì•ˆ í•¨
  // SSN, ì¹´ë“œë²ˆí˜¸, ìƒì„¸ ì£¼ì†Œ ë“±
}

// 2. ëª©ì  ì™¸ ì‚¬ìš© ê¸ˆì§€
// ë…¹ìŒ íŒŒì¼: ë¶„ìŸ í•´ê²° ëª©ì ë§Œ, ë§ˆì¼€íŒ… X

// 3. ë³´ì¡´ ê¸°ê°„
const RETENTION_POLICY = {
  transactions: 90,        // ì¼
  voice_recordings: 90,
  alerts: 30,
  audit_logs: 365
};

// 4. ì‚­ì œ ìš”ì²­ ì²˜ë¦¬ (GDPR Right to be Forgotten)
async function deleteUserData(userId: string) {
  await supabase.rpc('anonymize_user_data', { user_id: userId });
  // ê°œì¸ ì‹ë³„ ì •ë³´ë§Œ ì‚­ì œ, í†µê³„ëŠ” ìµëª…í™”í•˜ì—¬ ë³´ì¡´
}

// 5. ë°ì´í„° ì´ë™ê¶Œ (Data Portability)
async function exportUserData(userId: string) {
  const data = await supabase.rpc('export_user_data', { user_id: userId });
  return JSON.stringify(data, null, 2);
}

```

**Twilio ë³´ì•ˆ**

```tsx
// Webhook ì„œëª… ê²€ì¦
import { validateRequest } from 'twilio';

export async function POST(req: Request) {
  const signature = req.headers.get('X-Twilio-Signature')!;
  const url = req.url;
  const params = Object.fromEntries(await req.formData());

  // Twilio ì„œëª… ê²€ì¦
  const isValid = validateRequest(
    process.env.TWILIO_AUTH_TOKEN!,
    signature,
    url,
    params
  );

  if (!isValid) {
    return Response.json({ error: 'Invalid signature' }, { status: 403 });
  }

  // ... ì •ìƒ ì²˜ë¦¬
}

```

---

### 10.3 ê°€ìš©ì„± & ì‹ ë¢°ì„±

**ëª©í‘œ SLA**

```
Uptime: 99.5% (MVP) â†’ 99.9% (Production)
  â””â”€ ì›”ê°„ í—ˆìš© ë‹¤ìš´íƒ€ì„: 3.6ì‹œê°„ â†’ 43ë¶„

MTTR (Mean Time To Recovery): < 1ì‹œê°„
MTBF (Mean Time Between Failures): > 720ì‹œê°„ (30ì¼)

```

**ì¥ì•  ëŒ€ì‘**

```tsx
// 1. Twilio í†µí™” ì‹¤íŒ¨ ì‹œ SMS ë°±ì—…
async function handleVoiceCallFailure(txId: string, userPhone: string) {
  // SMS ë°œì†¡
  await twilioClient.messages.create({
    to: userPhone,
    from: process.env.TWILIO_PHONE_NUMBER!,
    body: `[ì¼€ì–´í˜ì´ ê¸´ê¸‰]
ê³ ìœ„í—˜ ê²°ì œê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.
ê¸ˆì•¡: ${tx.amount}ì›
ê°€ë§¹ì : ${tx.merchant_name}

ì „í™”ë¥¼ ë°›ì§€ ëª»í•˜ì…”ì„œ ë¬¸ìë¡œ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
ë³´í˜¸ìì—ê²Œ ì—°ë½ì´ ê°”ìŠµë‹ˆë‹¤.

í™•ì¸: ${process.env.NEXT_PUBLIC_BASE_URL}/tx/${txId}`
  });

  // ë³´í˜¸ì ì¦‰ì‹œ ì•Œë¦¼
  await notifyGuardian(txId, 'voice_failed_sms_sent');
}

// 2. Supabase ì—°ê²° ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„
async function queryWithRetry<T>(
  queryFn: () => Promise<T>,
  maxRetries = 3
): Promise<T> {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await queryFn();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await sleep(1000 * Math.pow(2, i)); // Exponential backoff
    }
  }
  throw new Error('Max retries exceeded');
}

// 3. Edge Function íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
export const config = {
  maxDuration: 60  // 60ì´ˆ (Vercel Pro Plan)
};

```

**ëª¨ë‹ˆí„°ë§ & ì•Œë¦¼**

```tsx
// Vercel Analytics + Custom Metrics

// 1. ì„±ê³µë¥  ì¶”ì 
const trackVoiceCallSuccess = (callSid: string, success: boolean) => {
  analytics.track('voice_call_completed', {
    call_sid: callSid,
    success,
    timestamp: new Date()
  });
};

// 2. ì—ëŸ¬ ë¡œê¹…
const logError = (error: Error, context: any) => {
  console.error({
    error: error.message,
    stack: error.stack,
    context,
    timestamp: new Date().toISOString()
  });

  // Sentry/Vercel Error Tracking
  if (process.env.NODE_ENV === 'production') {
    // Sentry.captureException(error);
  }
};

// 3. ì„±ëŠ¥ ë©”íŠ¸ë¦­
const measurePerformance = async (name: string, fn: () => Promise<any>) => {
  const start = Date.now();
  try {
    const result = await fn();
    const duration = Date.now() - start;

    analytics.track('performance', {
      metric: name,
      duration,
      success: true
    });

    return result;
  } catch (error) {
    const duration = Date.now() - start;
    analytics.track('performance', {
      metric: name,
      duration,
      success: false,
      error: error.message
    });
    throw error;
  }
};

```

---

### 10.4 ì ‘ê·¼ì„± (Accessibility)

**WCAG 2.1 AA ì¤€ìˆ˜**

```tsx
// 1. í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
<button
  onClick={handleBlock}
  onKeyDown={(e) => e.key === 'Enter' && handleBlock()}
  aria-label="ê²°ì œ ì¦‰ì‹œ ì°¨ë‹¨"
  className="focus:ring-4 focus:ring-red-500"
>
  ì¦‰ì‹œ ì°¨ë‹¨
</button>

// 2. ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
<div role="alert" aria-live="assertive">
  <span className="sr-only">ê¸´ê¸‰ ì•Œë¦¼:</span>
  ê³ ìœ„í—˜ ê²°ì œê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤
</div>

// 3. ìƒ‰ìƒ ëŒ€ë¹„ (ìµœì†Œ 4.5:1)
const colors = {
  text: '#111827',      // Gray 900
  background: '#FFFFFF',
  error: '#DC2626',     // Red 600
  success: '#059669'    // Green 600
};

// 4. í„°ì¹˜ íƒ€ê²Ÿ í¬ê¸° (ìµœì†Œ 44Ã—44px)
<button className="min-h-[44px] min-w-[44px] text-lg">
  ì°¨ë‹¨
</button>

// 5. í°íŠ¸ í¬ê¸° (ê³ ë ¹ì ìµœì í™”)
const typography = {
  base: '16px',         // ê¸°ë³¸
  lg: '18px',           // ë³¸ë¬¸
  xl: '20px',           // ì¤‘ìš” ì •ë³´
  '2xl': '24px',        // ì œëª©
  '3xl': '30px'         // í° ì œëª©
};

```

**ìŒì„± í†µí™” ì ‘ê·¼ì„±**

```xml
<!-- 1. ëª…í™•í•œ ë°œìŒ -->
<Say voice="Polly.Seoyeon" language="ko-KR">
  <prosody rate="slow" volume="loud">
    ì•ˆë…•í•˜ì„¸ìš”, ì¼€ì–´í˜ì´ ê°€ë””ì–¸ì…ë‹ˆë‹¤.
  </prosody>
</Say>

<!-- 2. ì¶©ë¶„í•œ ì‘ë‹µ ì‹œê°„ -->
<Gather timeout="15">  <!-- 10ì´ˆ â†’ 15ì´ˆ -->
  <Say>ì²œì²œíˆ ë‹µë³€í•´ ì£¼ì„¸ìš”.</Say>
</Gather>

<!-- 3. ë°˜ë³µ ì˜µì…˜ -->
<Gather>
  <Say>ë‹¤ì‹œ ë“¤ìœ¼ì‹œë ¤ë©´ 9ë²ˆì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</Say>
</Gather>

```

---

### 10.5 í™•ì¥ì„± (Scalability)

**ìˆ˜í‰ í™•ì¥ ì „ëµ**

```
í˜„ì¬ (MVP):
  - Vercel: Auto-scaling (serverless)
  - Supabase: 500 MB DB, 200 concurrent connections
  - Twilio: Unlimited concurrent calls

6ê°œì›” í›„:
  - Vercel Pro: $20/month
  - Supabase Pro: $25/month (8 GB DB, 500 concurrent)
  - Twilio: Pay-as-you-go (~$1,000/month for 1,000 users)

1ë…„ í›„ (10ë§Œ ì‚¬ìš©ì):
  - Database Sharding (ì‚¬ìš©ì ID ê¸°ë°˜)
  - Read Replica (ì½ê¸° ì „ìš© ë³µì œë³¸)
  - CDN Cache (ì •ì  ì½˜í…ì¸ )
  - Redis Cache (ì„¸ì…˜, íŒ¨í„´)

```

**ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”**

```sql
-- 1. íŒŒí‹°ì…”ë‹ (ì‹œê°„ ê¸°ë°˜)
CREATE TABLE transactions_2024_11 PARTITION OF transactions
FOR VALUES FROM ('2024-11-01') TO ('2024-12-01');

-- 2. ì¸ë±ìŠ¤ ìµœì í™”
CREATE INDEX CONCURRENTLY idx_tx_user_status
ON transactions(user_id, status)
WHERE status IN ('pending', 'voice_verification');

-- 3. Materialized View (í†µê³„)
CREATE MATERIALIZED VIEW user_stats AS
SELECT
  user_id,
  COUNT(*) as total_transactions,
  AVG(amount) as avg_amount,
  MAX(created_at) as last_transaction
FROM transactions
GROUP BY user_id;

-- 4. ìë™ VACUUM
ALTER TABLE transactions SET (
  autovacuum_vacuum_scale_factor = 0.1,
  autovacuum_analyze_scale_factor = 0.05
);

```

---

### 10.6 ìœ ì§€ë³´ìˆ˜ì„± (Maintainability)

**ì½”ë“œ í’ˆì§ˆ**

```json
// .eslintrc.json
{
  "extends": ["next/core-web-vitals", "prettier"],
  "rules": {
    "no-console": ["warn", { "allow": ["error", "warn"] }],
    "prefer-const": "error",
    "@typescript-eslint/no-unused-vars": "error"
  }
}

// .prettierrc
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}

```

**ë¬¸ì„œí™”**

```tsx
/**
 * ê³ ìœ„í—˜ ê²°ì œ ì‹œ ìŒì„± í†µí™” ë°œì‹ 
 *
 * @param transactionId - ê±°ë˜ ID
 * @param userPhone - ì‚¬ìš©ì ì „í™”ë²ˆí˜¸ (E.164 format)
 * @returns Twilio Call SID
 *
 * @throws {TwilioError} í†µí™” ë°œì‹  ì‹¤íŒ¨ ì‹œ
 * @throws {DatabaseError} DB ì¡°íšŒ/ì €ì¥ ì‹¤íŒ¨ ì‹œ
 *
 * @example
 * const callSid = await initiateVoiceCall(
 *   'txn_abc123',
 *   '+821012345678'
 * );
 */
async function initiateVoiceCall(
  transactionId: string,
  userPhone: string
): Promise<string> {
  // ...
}

```

**í…ŒìŠ¤íŠ¸ ì „ëµ**

```tsx
// Unit Tests (Vitest)
describe('calculateRiskScore', () => {
  it('should return 85 for high-risk transaction', () => {
    const tx = {
      amount: 3000000,
      merchant_category: 'ì˜¨ë¼ì¸ì‡¼í•‘',
      hour: 2
    };
    const pattern = {
      avg_amount: 50000,
      common_hours: [9, 12, 18],
      common_categories: ['í¸ì˜ì ']
    };

    const score = calculateRiskScore(tx, pattern);
    expect(score).toBe(85);
  });
});

// Integration Tests
describe('Voice Call Flow', () => {
  it('should initiate call and update DB', async () => {
    const txId = await createTestTransaction();
    const result = await POST('/api/twilio/voice/initiate', {
      transaction_id: txId,
      user_phone: '+821012345678'
    });

    expect(result.success).toBe(true);
    expect(result.call_sid).toMatch(/^CA/);
  });
});

// E2E Tests (Playwright)
test('Complete voice verification flow', async ({ page }) => {
  await page.goto('/user/payment-test');
  await page.fill('[name=amount]', '3000000');
  await page.selectOption('[name=category]', 'ì˜¨ë¼ì¸ì‡¼í•‘');
  await page.click('[type=submit]');

  await expect(page.locator('text=ìŒì„± í™•ì¸')).toBeVisible();
  // Mock Twilio webhook responses...
});

```

---

## 11. ì„±ê³µ ì§€í‘œ (Metrics)

### 11.1 í•µì‹¬ ì§€í‘œ (North Star Metrics)

**Primary Metric: í”¼í•´ ë°©ì§€ìœ¨**

```
í”¼í•´ ë°©ì§€ìœ¨ = (ì°¨ë‹¨ëœ ë³´ì´ìŠ¤í”¼ì‹± / ì „ì²´ ë³´ì´ìŠ¤í”¼ì‹± ì‹œë„) Ã— 100%

ëª©í‘œ:
  - MVP (1ê°œì›”): 70%
  - íŒŒì¼ëŸ¿ (3ê°œì›”): 85%
  - Production (6ê°œì›”): 90%+

ì¸¡ì • ë°©ë²•:
  - í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ 10ê±´ ì¤‘ ì„±ê³µ ê±´ìˆ˜
  - ì‹¤ì œ ì‚¬ìš©ì í”¼ë“œë°± (ì‚¬í›„ í™•ì¸)

```

**Secondary Metrics**

| ì§€í‘œ | í˜„ì¬ (ê¸°ì¡´ ë°©ì‹) | MVP ëª©í‘œ | Production ëª©í‘œ |
| --- | --- | --- | --- |
| **ì •íƒë¥ ** | 45-60% | 90%+ | 95%+ |
| **ì˜¤íƒë¥ ** | 25-40% | <10% | <5% |
| **í‰ê·  ëŒ€ì‘ ì‹œê°„** | 8-15ë¶„ | <1ë¶„ | <30ì´ˆ |
| **ë³´í˜¸ì ì•Œë¦¼ ì†ë„** | N/A | <3ì´ˆ | <1ì´ˆ |
| **ìŒì„± í†µí™” ì™„ë£Œìœ¨** | N/A | >80% | >90% |

---

### 11.2 ì œí’ˆ ì§€í‘œ (Product Metrics)

**ì‚¬ìš©ì í™œë™**

```tsx
// DAU/MAU (Daily/Monthly Active Users)
const engagement = {
  DAU: 'users who logged in today',
  MAU: 'users who logged in this month',
  'DAU/MAU': 'stickiness ratio (ëª©í‘œ: >20%)'
};

// ê²°ì œ í…ŒìŠ¤íŠ¸ ë¹ˆë„
const usage = {
  'í‰ê·  í…ŒìŠ¤íŠ¸ íšŸìˆ˜/ì£¼': 'ëª©í‘œ: 2-3íšŒ',
  'ê³ ìœ„í—˜ ì‹œë®¬ë ˆì´ì…˜ ë¹„ìœ¨': 'ëª©í‘œ: >30%'
};

```

**ë³´í˜¸ì ì°¸ì—¬ë„**

```tsx
const guardianMetrics = {
  'ë³´í˜¸ì ì´ˆëŒ€ ìˆ˜ë½ë¥ ': {
    current: 'N/A',
    target: '>70%',
    measure: 'accepted / invited'
  },

  'ì•Œë¦¼ ì‘ë‹µ ì‹œê°„': {
    current: 'N/A',
    target: '<5ë¶„',
    measure: 'action_at - created_at'
  },

  'ì°¨ë‹¨ ì•¡ì…˜ ë¹„ìœ¨': {
    current: 'N/A',
    target: '40-60%',
    measure: 'blocked / total_alerts'
  }
};

```

**ìŒì„± í†µí™” í’ˆì§ˆ**

```tsx
const voiceMetrics = {
  'í†µí™” ì—°ê²°ë¥ ': {
    formula: 'answered / total_calls',
    target: '>85%'
  },

  'í‰ê·  í†µí™” ì‹œê°„': {
    target: '30-60ì´ˆ',
    alert: '<20ì´ˆ or >120ì´ˆ'
  },

  'ì§ˆë¬¸ ì™„ë£Œìœ¨': {
    formula: 'calls with all 3 questions / total_calls',
    target: '>70%'
  },

  'ì¤‘ë„ ì´íƒˆë¥ ': {
    formula: 'calls hung up before completion / total_calls',
    target: '<15%'
  }
};

```

---

### 11.3 ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ (Business Metrics)

**ë¹„ìš© íš¨ìœ¨ì„±**

```tsx
const costMetrics = {
  'CPP (Cost Per Protection)': {
    formula: 'total_cost / prevented_frauds',
    target: '<10ë§Œì›',
    benchmark: 'ê¸°ì¡´ í”¼í•´ì•¡ í‰ê· : 2,427ë§Œì›'
  },

  'CAC (Customer Acquisition Cost)': {
    current: 'N/A (MVP)',
    target: '<5ë§Œì›',
    channels: ['ì•±ìŠ¤í† ì–´', 'ì œíœ´', 'ì¶”ì²œ']
  },

  'LTV (Lifetime Value)': {
    formula: 'monthly_fee Ã— avg_lifetime_months',
    assumption: '9,900ì›/ì›” Ã— 24ê°œì›” = 237,600ì›',
    target: 'LTV/CAC > 4'
  }
};

```

**ì „í™˜ìœ¨**

```
ê°€ì… í¼ë„:
  1. ëœë”© í˜ì´ì§€ ë°©ë¬¸: 1,000ëª…
  2. íšŒì›ê°€ì… í´ë¦­: 300ëª… (30%)
  3. ê°€ì… ì™„ë£Œ: 200ëª… (20%)
  4. ë³´í˜¸ì ì´ˆëŒ€: 140ëª… (14%)
  5. ë³´í˜¸ì ìˆ˜ë½: 100ëª… (10%)

  â†’ ìµœì¢… ì „í™˜ìœ¨: 10%
  â†’ ëª©í‘œ: 15% (6ê°œì›”)

```

---

### 11.4 ê¸°ìˆ  ì§€í‘œ (Technical Metrics)

**ì‹œìŠ¤í…œ ì„±ëŠ¥**

```tsx
const performanceMetrics = {
  'API ì‘ë‹µ ì‹œê°„ (p95)': {
    target: '<300ms',
    alert: '>500ms'
  },

  'Database ì¿¼ë¦¬ ì‹œê°„ (p95)': {
    target: '<100ms',
    alert: '>200ms'
  },

  'Twilio Call Initiation': {
    target: '<10ì´ˆ',
    alert: '>20ì´ˆ'
  },

  'Realtime ì•Œë¦¼ ì§€ì—°': {
    target: '<3ì´ˆ',
    alert: '>5ì´ˆ'
  }
};

```

**ì—ëŸ¬ìœ¨**

```tsx
const errorMetrics = {
  'API ì—ëŸ¬ìœ¨': {
    formula: 'errors / total_requests',
    target: '<1%',
    alert: '>5%'
  },

  'Twilio Call Failure Rate': {
    formula: 'failed_calls / total_calls',
    target: '<10%',
    alert: '>20%'
  },

  'Database Connection Errors': {
    target: '<0.1%',
    alert: '>1%'
  }
};

```

---

### 11.5 ì¸¡ì • ëŒ€ì‹œë³´ë“œ

```tsx
// Vercel Analytics + Custom Dashboard

interface MetricsDashboard {
  realtime: {
    active_users: number;
    ongoing_calls: number;
    pending_alerts: number;
  };

  today: {
    total_transactions: number;
    high_risk_count: number;
    voice_calls_made: number;
    blocked_count: number;
    prevented_amount: number; // ì›
  };

  week: {
    prevention_rate: number;  // %
    false_positive_rate: number;
    avg_response_time: number; // ì´ˆ
    guardian_engagement: number; // %
  };

  month: {
    active_users: number;
    total_cost: number; // Twilio + Infra
    cost_per_protection: number;
    user_satisfaction: number; // NPS
  };
}

// ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ UI
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì¼€ì–´í˜ì´ ê°€ë””ì–¸ - ìš´ì˜ ëŒ€ì‹œë³´ë“œ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ğŸ”´ ì‹¤ì‹œê°„                                          â”‚
â”‚  í™œì„± ì‚¬ìš©ì: 47ëª… | ì§„í–‰ ì¤‘ í†µí™”: 3ê±´              â”‚
â”‚                                                     â”‚
â”‚  ğŸ“Š ì˜¤ëŠ˜ (2024.11.19)                               â”‚
â”‚  â”œâ”€ ì´ ê±°ë˜: 156ê±´                                 â”‚
â”‚  â”œâ”€ ê³ ìœ„í—˜: 12ê±´                                   â”‚
â”‚  â”œâ”€ ìŒì„± í™•ì¸: 8ê±´                                 â”‚
â”‚  â”œâ”€ ì°¨ë‹¨: 3ê±´                                      â”‚
â”‚  â””â”€ ë°©ì§€ ê¸ˆì•¡: 850ë§Œì›                             â”‚
â”‚                                                     â”‚
â”‚  ğŸ“ˆ ì´ë²ˆ ì£¼                                         â”‚
â”‚  â”œâ”€ í”¼í•´ ë°©ì§€ìœ¨: 87.5% (7/8) âœ“                    â”‚
â”‚  â”œâ”€ ì˜¤íƒë¥ : 8.3% (10/120) âœ“                       â”‚
â”‚  â”œâ”€ í‰ê·  ëŒ€ì‘: 42ì´ˆ âœ“                             â”‚
â”‚  â””â”€ ë³´í˜¸ì ì°¸ì—¬: 91% (10/11) âœ“                    â”‚
â”‚                                                     â”‚
â”‚  ğŸ’° ì´ë²ˆ ë‹¬                                         â”‚
â”‚  â”œâ”€ MAU: 94ëª…                                      â”‚
â”‚  â”œâ”€ ì´ ë¹„ìš©: $127                                  â”‚
â”‚  â”œâ”€ CPP: 8.9ë§Œì› âœ“                                â”‚
â”‚  â””â”€ NPS: 72 (Promoter) âœ“                          â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## 12. ë¡œë“œë§µ ë° ë§ˆì¼ìŠ¤í†¤

### 12.1 MVP ë‹¨ê³„ (Week 1: 7ì¼)

**Day 1-2: ê¸°ë°˜ êµ¬ì¶•**

```
âœ… ì™„ë£Œ ê¸°ì¤€:
  - Next.js + Supabase í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
  - Twilio ê³„ì • ìƒì„± ë° ì „í™”ë²ˆí˜¸ êµ¬ë§¤
  - DB ìŠ¤í‚¤ë§ˆ 5ê°œ í…Œì´ë¸” ìƒì„±
  - ê¸°ë³¸ ì¸ì¦ (íšŒì›ê°€ì…/ë¡œê·¸ì¸)
  - Vercel ë°°í¬ íŒŒì´í”„ë¼ì¸

ğŸ“¦ Deliverables:
  - GitHub Repository
  - Supabase Project
  - Twilio Account
  - ê¸°ë³¸ ëœë”© í˜ì´ì§€

```

**Day 3-4: í•µì‹¬ ê¸°ëŠ¥ (ê²°ì œ + ìŒì„±)**

```
âœ… ì™„ë£Œ ê¸°ì¤€:
  - ê²°ì œ ì‹œë®¬ë ˆì´í„° UI ì™„ì„±
  - ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ë§ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
  - Twilio ì•„ì›ƒë°”ìš´ë“œ í†µí™” ë°œì‹  ì„±ê³µ
  - TwiML ë™ì  ìƒì„± (3ë‹¨ê³„ ì§ˆë¬¸)
  - ìŒì„± ë‹µë³€ ìˆ˜ì§‘ ë° ì €ì¥

ğŸ“¦ Deliverables:
  - /user/payment-test í˜ì´ì§€
  - /api/twilio/* ì—”ë“œí¬ì¸íŠ¸ 5ê°œ
  - í…ŒìŠ¤íŠ¸ í†µí™” ì„±ê³µ (ë³¸ì¸ ì „í™”ë²ˆí˜¸ë¡œ)

```

**Day 5-6: ë³´í˜¸ì & ëŒ€ì‹œë³´ë“œ**

```
âœ… ì™„ë£Œ ê¸°ì¤€:
  - ë³´í˜¸ì ì´ˆëŒ€/ìˆ˜ë½ í”Œë¡œìš°
  - Supabase Realtime ì•Œë¦¼ (<3ì´ˆ)
  - ë³´í˜¸ì ì¦‰ì‹œ ì°¨ë‹¨ ê¸°ëŠ¥
  - ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ (ì‹¤ì‹œê°„ ì•Œë¦¼)
  - ê²°ì œ ë‚´ì—­ í˜ì´ì§€

ğŸ“¦ Deliverables:
  - /user/guardians í˜ì´ì§€
  - /guardian/dashboard í˜ì´ì§€
  - Realtime êµ¬ë… ì„¤ì •
  - ì°¨ë‹¨/ìŠ¹ì¸ API

```

**Day 7: í…ŒìŠ¤íŠ¸ & ë°œí‘œ ì¤€ë¹„**

```
âœ… ì™„ë£Œ ê¸°ì¤€:
  - ì „ì²´ í”Œë¡œìš° ì‹œë‚˜ë¦¬ì˜¤ 3ê°œ ì„±ê³µ
  - 10ê±´ í…ŒìŠ¤íŠ¸ (ì •íƒë¥  90%+, ì˜¤íƒë¥  <10%)
  - ë²„ê·¸ 0ê±´ (Critical/High)
  - ë°œí‘œ ìë£Œ ì™„ì„±
  - ë°ëª¨ ë¦¬í—ˆì„¤ 2íšŒ

ğŸ“¦ Deliverables:
  - í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸
  - ë°œí‘œ PPT (10p)
  - ë°ëª¨ ë¹„ë””ì˜¤ (3ë¶„)
  - README.md ì—…ë°ì´íŠ¸

```

---

### 12.2 íŒŒì¼ëŸ¿ ë‹¨ê³„ (Month 2-4)

**ëª©í‘œ: ì‹¤ì œ ì‚¬ìš©ì 100ëª… í™•ë³´ ë° ê²€ì¦**

```
Week 1-2: MVP í”¼ë“œë°± ë°˜ì˜
  - í•´ì»¤í†¤ ì‹¬ì‚¬ìœ„ì› í”¼ë“œë°± ì ìš©
  - ì´ˆê¸° ì‚¬ìš©ì 10ëª… ëª¨ì§‘ (íŒ€ì› ê°€ì¡±)
  - UX ê°œì„  (í° ê¸€ì, ê°„ë‹¨í•œ í”Œë¡œìš°)

Week 3-4: íŒŒì¼ëŸ¿ ì¤€ë¹„
  - ì˜¤í”ˆë±…í‚¹ í…ŒìŠ¤íŠ¸ë² ë“œ ì—°ë™ (ì‹¤ì œ ê²°ì œ ì—°ë™ ì¤€ë¹„)
  - ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ì‘ì„±
  - ì´ìš©ì•½ê´€ ì‘ì„±
  - ê³ ê° ì§€ì› ì±„ë„ (ì¹´ì¹´ì˜¤í†¡ ì±„ë„)

Month 2: ì§€ìì²´/ì¹´ë“œì‚¬ ì œíœ´ í˜‘ì˜
  - ë…¸ì›êµ¬ì²­ ë³µì§€ê³¼ ë¯¸íŒ…
  - ì‹ í•œì¹´ë“œ ë””ì§€í„¸í˜ì‹ íŒ€ ë¯¸íŒ…
  - íŒŒì¼ëŸ¿ MOU ì²´ê²° (ëª©í‘œ: 1ê°œì‚¬)

Month 3-4: íŒŒì¼ëŸ¿ ìš´ì˜
  - 100ëª… ì‚¬ìš©ì ëª¨ì§‘ (ì œíœ´ì²˜ í†µí•´)
  - ì£¼ê°„ ëª¨ë‹ˆí„°ë§ ë° í”¼ë“œë°± ìˆ˜ì§‘
  - ì •íƒë¥ /ì˜¤íƒë¥  ë°ì´í„° ìˆ˜ì§‘
  - ì¼€ì´ìŠ¤ ìŠ¤í„°ë”” 3ê±´ ì‘ì„±

```

**ì„±ê³µ ê¸°ì¤€**

```
âœ… í”¼í•´ ë°©ì§€ìœ¨ 85% ì´ìƒ
âœ… ì˜¤íƒë¥  10% ì´í•˜
âœ… NPS 60 ì´ìƒ
âœ… ì œíœ´ì‚¬ 1ê³³ ì´ìƒ í™•ë³´
âœ… í”¼í•´ ë°©ì§€ ì´ì•¡ 1ì–µì› ì´ìƒ

```

---

### 12.3 í™•ì¥ ë‹¨ê³„ (Month 5-12)

**Q2 (Month 5-7): B2B2C ëª¨ë¸ êµ¬ì¶•**

```
Product:
  - ê¸°ì—…ìš© ëŒ€ì‹œë³´ë“œ (ì¹´ë“œì‚¬ìš©)
  - Bulk ì‚¬ìš©ì ë“±ë¡ API
  - í™”ì´íŠ¸ë¼ë²¨ ì†”ë£¨ì…˜

Business:
  - ì¹´ë“œì‚¬ 2ê³³ ì œíœ´ (ëª©í‘œ: 1,000ëª…)
  - ë³´í—˜ì‚¬ ì œíœ´ í˜‘ì˜ (ì‹¤ì†ë³´í—˜ ì—°ê³„)
  - SaaS ìš”ê¸ˆì œ ì„¤ê³„ (B2B: ì‚¬ìš©ìë‹¹ ì›” 5,000ì›)

Marketing:
  - ì¼€ì´ìŠ¤ ìŠ¤í„°ë”” ë°œí‘œ (ì»¨í¼ëŸ°ìŠ¤)
  - ì–¸ë¡  ë³´ë„ (3ê±´)
  - ì•±ìŠ¤í† ì–´ ì¶œì‹œ (iOS/Android)

```

**Q3 (Month 8-10): ì „êµ­ í™•ì‚°**

```
Product:
  - AI ì´ìƒ íƒì§€ ëª¨ë¸ (ì˜¨ë””ë°”ì´ìŠ¤ ML)
  - ì‚¬ê¸° ì „í™”/ë©”ì‹œì € ë¶„ì„
  - ë‹¤êµ­ì–´ ì§€ì› (ì˜ì–´, ì¤‘êµ­ì–´)

Business:
  - ì‚¬ìš©ì 10,000ëª… ëŒíŒŒ
  - ì¹´ë“œì‚¬ 5ê³³ ì œíœ´
  - ì›” ë§¤ì¶œ 5,000ë§Œì›

Funding:
  - Seed íˆ¬ì ìœ ì¹˜ (ëª©í‘œ: 10ì–µì›)
  - íŒ€ í™•ì¥ (10ëª…)

```

**Q4 (Month 11-12): í”Œë«í¼í™”**

```
Product:
  - ì œíœ´ì‚¬ ì—°ë™ API í”Œë«í¼
  - ì…€í”„ ì„œë¹„ìŠ¤ í¬í„¸
  - ë°ì´í„° ë¶„ì„ ëŒ€ì‹œë³´ë“œ

Business:
  - ì‚¬ìš©ì 50,000ëª…
  - ì›” ë§¤ì¶œ 2ì–µì›
  - í•´ì™¸ ì§„ì¶œ ì¤€ë¹„ (ì¼ë³¸, ëŒ€ë§Œ)

```

---

## 13. ë¦¬ìŠ¤í¬ ë° ì œì•½ì‚¬í•­

### 13.1 ê¸°ìˆ  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
| --- | --- | --- | --- |
| **Twilio í†µí™” ì‹¤íŒ¨ìœ¨ ë†’ìŒ** | ì¤‘ | ë†’ìŒ | SMS ë°±ì—…, ì¬ì‹œë„ ë¡œì§, ëª¨ë‹ˆí„°ë§ |
| **Supabase Realtime ì§€ì—°** | ë‚® | ì¤‘ | íƒ€ì„ì•„ì›ƒ ì„¤ì •, í´ë§ ë°±ì—… |
| **ìŒì„± ì¸ì‹ ì˜¤ë¥˜ (ë…¸ì¸ ë°œìŒ)** | ì¤‘ | ì¤‘ | í‚¤íŒ¨ë“œ ì…ë ¥ ìš°ì„ , ìŒì„±ì€ ë³´ì¡° |
| **DB ì„±ëŠ¥ ì €í•˜ (ì¿¼ë¦¬ ëŠë¦¼)** | ì¤‘ | ì¤‘ | ì¸ë±ìŠ¤ ìµœì í™”, ìºì‹±, Read Replica |
| **Vercel ë¹„ìš© ì´ˆê³¼** | ë‚® | ë‚® | Pro Plan ì „í™˜, ëª¨ë‹ˆí„°ë§ |

**ëŒ€ì‘ ê³„íš**

```tsx
// Twilio í†µí™” ì‹¤íŒ¨ ì‹œ
if (callStatus === 'failed' || callStatus === 'no-answer') {
  // Plan A: SMS ë°±ì—…
  await sendSMS(userPhone, alertMessage);

  // Plan B: ë³´í˜¸ì ì¦‰ì‹œ ì•Œë¦¼
  await notifyGuardian(txId, 'voice_failed');

  // Plan C: 30ì´ˆ í›„ ì¬ì‹œë„
  if (retryCount < 3) {
    await scheduleRetry(callSid, 30000);
  }
}

```

---

### 13.2 ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
| --- | --- | --- | --- |
| **ì‚¬ìš©ì ëª¨ì§‘ ì–´ë ¤ì›€** | ë†’ìŒ | ë†’ìŒ | ì œíœ´ì‚¬ í†µí•œ B2B2C, ë¬´ë£Œ ì²´í—˜ |
| **ì˜¤íƒìœ¼ë¡œ ì¸í•œ ì‹ ë¢° ì €í•˜** | ì¤‘ | ë†’ìŒ | ê°œì¸ íŒ¨í„´ í•™ìŠµ, ì ì§„ì  ê°œì„  |
| **ì œíœ´ì‚¬ í˜‘ì˜ ì§€ì—°** | ì¤‘ | ì¤‘ | ë³‘ë ¬ í˜‘ì˜, íŒŒì¼ëŸ¿ ìš°ì„  |
| **ê²½ìŸì‚¬ ì§„ì…** | ì¤‘ | ì¤‘ | ë¹ ë¥¸ ì‹¤í–‰, íŠ¹í—ˆ ì¶œì› |
| **ê·œì œ ë³€í™” (ê°œì¸ì •ë³´ë²•)** | ë‚® | ë†’ìŒ | ë²•ë¥  ìë¬¸, ì»´í”Œë¼ì´ì–¸ìŠ¤ ìš°ì„  |

---

### 13.3 ìš´ì˜ ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
| --- | --- | --- | --- |
| **ê³ ê° ì§€ì› ë¶€ë‹´ ì¦ê°€** | ë†’ìŒ | ì¤‘ | FAQ, ì±—ë´‡, ì œíœ´ì‚¬ ê³µë™ ì§€ì› |
| **Twilio ë¹„ìš© ê¸‰ì¦** | ì¤‘ | ì¤‘ | ì˜ˆì‚° ì•Œë¦¼, ìµœì í™”, ìš”ê¸ˆì œ í˜‘ìƒ |
| **ë³´ì•ˆ ì‚¬ê³  (í•´í‚¹)** | ë‚® | ë†’ìŒ | ì •ê¸° ê°ì‚¬, Bug Bounty, ë³´í—˜ |
| **ì„œë¹„ìŠ¤ ì¥ì•  (Downtime)** | ë‚® | ë†’ìŒ | ëª¨ë‹ˆí„°ë§, SLA, ë°±ì—… ì‹œìŠ¤í…œ |

---

### 13.4 ì œì•½ì‚¬í•­

**MVP ë‹¨ê³„ ì œì•½**

```
ê¸°ìˆ ì  ì œì•½:
  âŒ ì‹¤ì œ ì˜¤í”ˆë±…í‚¹ ì—°ë™ ë¶ˆê°€ (ìƒŒë“œë°•ìŠ¤ë§Œ)
  âŒ ì‹¤ì‹œê°„ STT ì–´ë ¤ì›€ (í‚¤íŒ¨ë“œ ì…ë ¥ìœ¼ë¡œ ëŒ€ì²´)
  âŒ ì˜¨ë””ë°”ì´ìŠ¤ ML ë¯¸êµ¬í˜„ (ê·œì¹™ ê¸°ë°˜)
  âŒ ì•ˆë“œë¡œì´ë“œ ë„¤ì´í‹°ë¸Œ ì—†ìŒ (ì›¹ë§Œ)

ë¦¬ì†ŒìŠ¤ ì œì•½:
  - ê°œë°œ ê¸°ê°„: 7ì¼
  - ì¸ë ¥: 3ëª…
  - ì˜ˆì‚°: $100 (Twilio)
  - Supabase Free Tier (500 MB)

ë²”ìœ„ ì œì•½:
  - ì‚¬ìš©ì: 100ëª… ì´í•˜
  - ë™ì‹œ í†µí™”: 10ê±´
  - í…ŒìŠ¤íŠ¸ ë°ì´í„°ë§Œ (ì‹¤ì œ ê¸ˆìœµ ê±°ë˜ X)

```

**ë²•ì  ì œì•½**

```
ê°œì¸ì •ë³´ë³´í˜¸ë²•:
  - ìµœì†Œ ìˆ˜ì§‘ ì›ì¹™ ì¤€ìˆ˜
  - ëª©ì  ì™¸ ì‚¬ìš© ê¸ˆì§€
  - 30ì¼ ë³´ì¡´ í›„ ì‚­ì œ

ì „ìê¸ˆìœµê±°ë˜ë²•:
  - ì‹¤ì œ ê²°ì œ ì—°ë™ ì‹œ ì¸ì¦ í•„ìš”
  - ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ (ì•”í˜¸í™”, ë¡œê·¸)

í†µì‹ ë¹„ë°€ë³´í˜¸ë²•:
  - ë…¹ìŒ ì‹œ ì‚¬ì „ ê³ ì§€ í•„ìš”
  - "ì´ í†µí™”ëŠ” ì„œë¹„ìŠ¤ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•´ ë…¹ìŒë©ë‹ˆë‹¤"

```

---

## 14. ë¶€ë¡

### 14.1 ìš©ì–´ ì •ì˜ (Glossary)

| ìš©ì–´ | ì •ì˜ |
| --- | --- |
| **ë³´ì´ìŠ¤í”¼ì‹±** | ì „í™”ë¥¼ ì´ìš©í•œ ê¸ˆìœµ ì‚¬ê¸° |
| **ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´** | 0-100ì , ê²°ì œì˜ ìœ„í—˜ë„ |
| **ì •íƒë¥ ** | ì‹¤ì œ ì‚¬ê¸°ë¥¼ ì •í™•íˆ íƒì§€í•œ ë¹„ìœ¨ |
| **ì˜¤íƒë¥ ** | ì •ìƒ ê²°ì œë¥¼ ì‚¬ê¸°ë¡œ ì˜¤íŒí•œ ë¹„ìœ¨ |
| **TwiML** | Twilio Markup Language, í†µí™” í”Œë¡œìš° ì •ì˜ |
| **E.164** | êµ­ì œ ì „í™”ë²ˆí˜¸ í‘œì¤€ (+821012345678) |
| **RLS** | Row Level Security, Postgres ì ‘ê·¼ ì œì–´ |

---

### 14.2 ì°¸ê³  ìë£Œ

**ì™¸ë¶€ ë¬¸ì„œ**

- Twilio Voice Docs: https://www.twilio.com/docs/voice
- Supabase Docs: https://supabase.com/docs
- Next.js Docs: https://nextjs.org/docs
- WCAG 2.1: https://www.w3.org/WAI/WCAG21/quickref/

**ë‚´ë¶€ ë¬¸ì„œ**

- [ê¸°ìˆ  ì„¤ê³„ì„œ](https://claude.ai/chat/TECH_SPEC.md)
- [API ëª…ì„¸ì„œ](https://claude.ai/chat/API_SPEC.md)
- [í…ŒìŠ¤íŠ¸ ê³„íšì„œ](https://claude.ai/chat/TEST_PLAN.md)

---

### 14.3 ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ì‚¬í•­ | ì‘ì„±ì |
| --- | --- | --- | --- |
| 1.0 | 2024.11.19 | ì´ˆì•ˆ ì‘ì„± | ì„ì„±ë¹ˆ |
| 1.1 | TBD | MVP í”¼ë“œë°± ë°˜ì˜ | TBD |

---
# 케어페이 가디언 - 작업 목록 8: 테스트, 배포 준비 및 문서화

**작업 범위**: 통합 테스트, Vercel 배포, 환경변수 설정, 문서 작성

---

### 관련 파일
- `tests/` - 테스트 파일 디렉토리
- `vercel.json` - Vercel 설정
- `.github/workflows/test.yml` - CI/CD 설정
- `docs/SETUP.md` - 설치 가이드
- `docs/API.md` - API 문서
- `docs/DEMO.md` - 데모 시나리오

---

## 작업

- [ ] 8.0 테스트, 배포 준비 및 문서화 (Push 단위)
    - [ ] 8.1 E2E 테스트 시나리오 작성 (커밋 단위)
        - [ ] 8.1.1 테스트 프레임워크 설치 (Playwright 또는 Cypress)
        - [ ] 8.1.2 시나리오 1: 회원가입 → 보호자 초대 → 수락
        - [ ] 8.1.3 시나리오 2: 정상 결제 (자동 승인)
        - [ ] 8.1.4 시나리오 3: 고위험 결제 → 음성 확인 → 차단
        - [ ] 8.1.5 시나리오 4: 보호자 알림 → 즉시 차단
        - [ ] 8.1.6 E2E 테스트 확인
            - [ ] 8.1.6.1 테스트 실행 및 검증
            - [ ] 8.1.6.2 오류 수정 (필요 시)
    
    - [ ] 8.2 단위 테스트 커버리지 확보 (커밋 단위)
        - [ ] 8.2.1 리스크 스코어링 로직 테스트
        - [ ] 8.2.2 패턴 학습 로직 테스트
        - [ ] 8.2.3 API 엔드포인트 테스트 (각 route.ts)
        - [ ] 8.2.4 커버리지 목표 80% 이상
        - [ ] 8.2.5 단위 테스트 확인
            - [ ] 8.2.5.1 커버리지 리포트 생성
            - [ ] 8.2.5.2 테스트 실행 및 검증
            - [ ] 8.2.5.3 오류 수정 (필요 시)
    
    - [ ] 8.3 Vercel 프로젝트 생성 및 연결 (커밋 단위)
        - [ ] 8.3.1 Vercel 대시보드에서 프로젝트 생성
        - [ ] 8.3.2 GitHub 저장소 연결
        - [ ] 8.3.3 환경변수 설정 (Vercel 대시보드)
            - NEXT_PUBLIC_SUPABASE_URL
            - NEXT_PUBLIC_SUPABASE_ANON_KEY
            - SUPABASE_SERVICE_ROLE_KEY
            - TWILIO_ACCOUNT_SID
            - TWILIO_AUTH_TOKEN
            - TWILIO_PHONE_NUMBER
        - [ ] 8.3.4 Vercel 연결 확인
            - [ ] 8.3.4.1 테스트 배포 실행
            - [ ] 8.3.4.2 배포 URL 확인
            - [ ] 8.3.4.3 오류 수정 (필요 시)
    
    - [ ] 8.4 Vercel 설정 파일 작성 (커밋 단위)
        - [ ] 8.4.1 `vercel.json` 생성
            ```
            {
              "buildCommand": "npm run build",
              "framework": "nextjs",
              "regions": ["icn1"]
            }
            ```
        - [ ] 8.4.2 리다이렉트 설정 (/ → /user/dashboard)
        - [ ] 8.4.3 헤더 설정 (보안, CORS)
        - [ ] 8.4.4 Vercel 설정 확인
            - [ ] 8.4.4.1 설정 파일 유효성 검사
            - [ ] 8.4.4.2 배포 테스트
            - [ ] 8.4.4.3 오류 수정 (필요 시)
    
    - [ ] 8.5 CI/CD 파이프라인 설정 (커밋 단위)
        - [ ] 8.5.1 `.github/workflows/test.yml` 생성
        - [ ] 8.5.2 자동 테스트 실행 (push, PR 시)
        - [ ] 8.5.3 린팅 및 타입 체크
        - [ ] 8.5.4 Vercel 자동 배포 (main 브랜치)
        - [ ] 8.5.5 CI/CD 확인
            - [ ] 8.5.5.1 GitHub Actions 실행 확인
            - [ ] 8.5.5.2 자동 배포 성공 확인
            - [ ] 8.5.5.3 오류 수정 (필요 시)
    
    - [ ] 8.6 설치 가이드 문서 작성 (커밋 단위)
        - [ ] 8.6.1 `docs/SETUP.md` 생성
        - [ ] 8.6.2 섹션 구성
            - 사전 요구사항 (Node.js, npm, Git)
            - 저장소 클론 및 의존성 설치
            - Supabase 프로젝트 생성 및 설정
            - Twilio 계정 설정
            - 환경변수 설정 (`.env.local` 예시)
            - 데이터베이스 마이그레이션
            - 개발 서버 실행
        - [ ] 8.6.3 설치 가이드 확인
            - [ ] 8.6.3.1 문서 검토
            - [ ] 8.6.3.2 다른 개발자가 가이드 따라 설치 가능한지 검증
            - [ ] 8.6.3.3 오류 수정 (필요 시)
    
    - [ ] 8.7 API 문서 작성 (커밋 단위)
        - [ ] 8.7.1 `docs/API.md` 생성
        - [ ] 8.7.2 모든 API 엔드포인트 문서화
            - 경로, 메서드, 요청/응답 예시
            - 인증 요구사항
            - 에러 코드
        - [ ] 8.7.3 Postman 또는 Insomnia 컬렉션 생성
        - [ ] 8.7.4 API 문서 확인
            - [ ] 8.7.4.1 문서 검토
            - [ ] 8.7.4.2 모든 API 테스트
            - [ ] 8.7.4.3 오류 수정 (필요 시)
    
    - [ ] 8.8 데모 시나리오 및 프레젠테이션 자료 (커밋 단위)
        - [ ] 8.8.1 `docs/DEMO.md` 생성
        - [ ] 8.8.2 해커톤 데모 시나리오 작성 (5분)
            - 문제 소개 (30초)
            - 솔루션 개요 (1분)
            - 라이브 데모 (3분)
            - Q&A 준비 (30초)
        - [ ] 8.8.3 테스트 계정 생성 (데모용)
        - [ ] 8.8.4 스크린샷 및 영상 녹화
        - [ ] 8.8.5 데모 자료 확인
            - [ ] 8.8.5.1 데모 리허설
            - [ ] 8.8.5.2 피드백 반영
            - [ ] 8.8.5.3 최종 검토
    
    - [ ] 8.9 프로덕션 배포 체크리스트 (커밋 단위)
        - [ ] 8.9.1 모든 환경변수 프로덕션 값으로 설정
        - [ ] 8.9.2 Supabase RLS 정책 재확인
        - [ ] 8.9.3 Twilio 전화번호 검증 (trial 제한 확인)
        - [ ] 8.9.4 PWA manifest 및 아이콘 최종 확인
        - [ ] 8.9.5 Lighthouse 점수 확인 (Performance, PWA, SEO)
        - [ ] 8.9.6 보안 헤더 설정 (CSP, HSTS)
        - [ ] 8.9.7 에러 로깅 설정 (Sentry 또는 Vercel Analytics)
        - [ ] 8.9.8 프로덕션 배포 확인
            - [ ] 8.9.8.1 최종 배포 실행
            - [ ] 8.9.8.2 프로덕션 URL 테스트
            - [ ] 8.9.8.3 오류 수정 (필요 시)
